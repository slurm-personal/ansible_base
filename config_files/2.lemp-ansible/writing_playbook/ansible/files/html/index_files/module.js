if(!JSON){var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())}if(!String.prototype.trim){(function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}})()}if(window.Element&&!Element.prototype.closest){Element.prototype.closest=function(c){var d=(this.document||this.ownerDocument).querySelectorAll(c),a,b=this;do{a=d.length;while(--a>=0&&d.item(a)!==b){}}while((a<0)&&(b=b.parentElement));return b}}(function(b6,G,bw){var bj=false,S="219",z=13,cC=42,w=b6.roistatHost,aC="0.2",ae="1.0",cJ="roistat_visit_cookie_expire",bY="roistat_visit",aQ="roistat_first_visit",aj="roistat_is_need_listen_requests",dc="roistat_phone",aB="roistat_referrer",cM="roistat_marker",a6="roistat_marker_old",bq="roistat_ab",cr="rs",H="roistat",Y="leadhunter_expire",N=5*60*60,bx="roistat_leadHunterEnabled",q="roistat_leadHunterTargetPagesMap",cl="roistat_leadHunterCallbackSettings",aO="roistat_leadHunterScriptId",T="roistat_isleadHunterScriptIdActive",a3="roistat_multiwidgetEnabled",bQ="roistat_multiwidgetVKEnabled",cz="roistat_multiwidgetVKLink",O="roistat_multiwidgetFBEnabled",cT="roistat_multiwidgetFBLink",co="roistat_multiwidgetTelegramEnabled",bh="roistat_multiwidgetTelegramLink",cx="roistat_onlineChatEnabled",A="roistat_onlineChatSettings",d=7*24*60*60,cE={expires:d,path:"/"},af="roistat-promo",am="roistat-phone",F="roistat-phone-country",ag="roistat-phone-region",I="roistat-phone-number",c3="roistat-phone-tel",bD="country",aJ="region",ba="number",bT="tel",n="roistat_call_tracking",U="roistat-js-script",bo="roistat_phone_replacement",bb="roistat_phone_script_data",cB="roistat-visit-id",aR="roistat_metrika_counter_id",i="roistat_marker_from_referrer",bn="roistat_emailtracking_email",b="roistat_emailtracking_tracking_email",bA="roistat_emailtracking_emails",l="roistat_geo_data",c5="roistat_proxy_forms",cG="roistat_isMultiDomain",ct=["roistat_param1","roistat_param2","roistat_param3","roistat_param4","roistat_param5"],bZ="roistat_debug",aU="roistat_settings_saved",cc="nocookie",aS=["yandex.ru"],az="beta_test",cp="roistat_settings_version",bO="roistat-leadhunter-form-template",bm="roistat-leadhunter-pulsator-template",bN="roistat-leadhunter-pulsator-settings",bi="roistat-online-chat-pulsator-template",B="roistat-online-chat-iframe-template",cN="roistat-multiwidget-pulsator-template",f="roistat-multiwidget-pulsator-settings",W="roistat_last_settings_update_time",cj="roistat_authorized_client",aw="roistat_params",aI="mobile",p="tablet",bK="desktop",bH=500,c0=1024;
var bL="ru",c9="en",ab,r;var cS=w.replace(/^cloud\./,"");var cO="cllctr."+cS;var bP={callTrackingEnabled:true,callTrackingManual:false,jsonpRequestTimeout:100};var b0={isVisitProcessed:false,visitFromUser:null,cookies:{},pageParams:{},source:{marker:null},isSettingsUpdating:false};var cD={onVisitProcessed:[],onCallTrackingPhoneReceived:[],onSPAPageChanged:[]};if(b6.roistatAlreadyStarted){if(typeof console!=="undefined"&&console.log){console.log("Call: roistat already started, skip")}return}b6.roistatAlreadyStarted=true;if(b6.roistatCookieDomain){cE.domain=b6.roistatCookieDomain}b6.roistat={version:S,getSource:function(){return b0.source.marker},visit:null,getVisit:function(){return roistat.visit},setVisit:function(e){b0.visitFromUser=e},registerOnVisitProcessedCallback:function(e){cm(e)},registerOnCalltrackingPhoneReceivedCallback:function(e){bk(e)},disableCallTracking:function(){bP.callTrackingEnabled=false},setCallTrackingManualMode:function(){bP.callTrackingManual=true},setJSONPRequestTimeout:function(e){bP.jsonpRequestTimeout=e},callTracking:{enabled:0,phone:"",sessionTime:0,replacementClasses:"",phonePrefix:""},emailtracking:{enabled:true,loaded:false,email:null,trackingEmail:null,emails:null,refresh:function(){u("Warning: used emailtracking refresh before module init")}},geo:{city:null,country:null,region:null,},leadHunter:{isEnabled:true,onBeforeAppear:null,onAfterAppear:null,onBeforeSubmit:null,onAfterSubmit:null,additionalNotifyEmail:null,localization:{translateToRussian:null,translateToEnglish:null},form:{title:null,subTitle:null,thankYouText:null,buttonText:null,nameLabel:null,contactLabel:null,isNameRequired:false,autoShowTime:null,isNeedExplicitAgreement:null}},onlineChat:{isEnabled:true,customTriggerSelector:null,customPosition:{top:null,right:null,bottom:null,left:null},localization:{translateToRussian:null,translateToEnglish:null},notificationsCustomHolderSelector:null,isAvailableForCurrentUserAgent:true,pagesFilter:{isEnabled:false,pages:[]}},multiwidget:{isEnabled:true,vk:{isEnabled:false,link:null},fb:{isEnabled:false,link:null},telegram:{isEnabled:false,link:null}},page:{params:{}},proxyForms:{enabled:true,loaded:false,settings:[]},authClientById:function(e){ax(e,bw)},authClientByEmail:function(e){ax(bw,e)},setRoistatParams:function(dq,dp,dm,dl,dk){var di=M()+"/update-visit-by-params";if(!b0.isVisitProcessed){bt(di,"RoistatParam was not updated because visit is not processed, roistatParam:"+encodeURIComponent(dq));u("Visit is not processed, return");return}var dn=o();if(dn<=0){bt(di,"RoistatParam was not updated because visitId <= 0, roistatParam:"+encodeURIComponent(dq));u("Invalid arguments, return");return}bt(di,"Start process for visit "+dn+", roistatParam: "+encodeURIComponent(dq));var ds={roistat_param1:dq,roistat_param2:dp,roistat_param3:dm,roistat_param4:dl,roistat_param5:dk};var dt=false;var du={};for(var dx in ds){if(!Object.prototype.hasOwnProperty.call(ds,dx)){continue}var dw=ds[dx];if(dw!==bw&&dw.length>0){du[dx]=dw;dt=true}}if(!dt){bt(di,"Visit "+dn+" was not updated because none of RoistatParams are valid, roistatParam:"+encodeURIComponent(dq));u("Has no valid roistat params for visit update, return");return}var dv=aw;var dr=b3.get(dv);var e=JSON.stringify(du);var dy=dr===e;if(dy){u("Params already updated, return");return}b3.set(dv,e);di+="?visit="+dn+"&v="+S;for(var dj in du){if(!Object.prototype.hasOwnProperty.call(du,dj)){continue}di+="&"+dj+"="+encodeURIComponent(du[dj])}aP(di)}};var ax=function(e,dk){if(!b0.isVisitProcessed){u("Visit is not processed, return");return}var dl=e!==bw&&e.length>0,dp=dk!==bw&&dk.length>0;if(!dl&&!dp){u("Invalid client params, return");return}var dm=o();if(dm<=0){u("Invalid arguments, return");return}var dn=cj,dq=b3.get(dn),dj=dl?e:dk;if(dq===dj){u('Client "'+dj+'" is already authorized, return');return}u("Auth client: "+dj);b3.set(dn,dj);var di=M()+"/update-visit-by-client?visit="+dm+"&v="+S;if(dl){di+="&client_id="+encodeURIComponent(e)}if(dp){di+="&client_email="+encodeURIComponent(dk)}aP(di)};var cW=function(dk,di){var dj=dk.length;for(var e=0;e<dj;e++){if(di===dk[e]){return true}}return false};var Z=function(){return j(az)>0};var y=function(){return b6.location.protocol+"//"+b6.location.host+b6.location.pathname};var D=function(){if(de()){return aI}if(c2()){return p}return bK};var de=function(){return b6.innerWidth<=bH};var c2=function(){return b6.innerWidth>bH&&b6.innerWidth<=c0};var aX=function(){return b6.roistatProjectId};var cq=function(){return aX().replace(/\D/g,"")};var bd=function(e){var di=cq();return cW(e,di)};var cw=function(e){return JSON.parse(JSON.stringify(e))};var br=function(){var di=cw(cE),e=parseInt(b3.get(cJ));di.expires=e>0?e:d;return di};var cm=function(e){if(!b0.isVisitProcessed){cD.onVisitProcessed.push(e)}else{e()}};var cy=function(){b0.isVisitProcessed=true;u("[Roistat] visit id set. Processing callbacks");var di=cD.onVisitProcessed.length;for(var e=0;e<di;e++){cD.onVisitProcessed[e]()}if(b6.roistatVisitCallback!==bw){b6.roistatVisitCallback(b6.roistat.getVisit())
}};var bk=function(e){cD.onCallTrackingPhoneReceived.push(e)};var cU=function(){var di=cD.onCallTrackingPhoneReceived.length;for(var e=0;e<di;e++){cD.onCallTrackingPhoneReceived[e]()}};var ar=function ar(e){cD.onSPAPageChanged.push(e)};var bW=function bW(){u("[Roistat] SPA page changed. Processing callbacks");var di=cD.onSPAPageChanged.length;for(var e=0;e<di;e++){cD.onSPAPageChanged[e]()}};var ah=function(dl,dk){var dj=dl.className.split(" "),di=false,e;for(e=0;e<dj.length;e++){if(dj[e]===dk){di=true;break}}if(!di){dj.push(dk);dl.className=dj.join(" ")}};var bX=function(dk,dj){var di=dk.className.split(" "),e;for(e=0;e<di.length;e++){if(di[e]===dj){di.splice(e,1);dk.className=di.join(" ");break}}};var ay=function(dj){try{return decodeURIComponent(dj)}catch(dk){var di;di=x(dj);if(di===null){return dj}return di}};var bJ={visitor_uid:function(){u("AmoCrmUID: starting collecting AmoCRM visitor_uid");if(!dh(b6.AMOPIXEL_IDENTIFIER)||!R(b6.AMOPIXEL_IDENTIFIER.getVisitorUid)){u("AmoCrmUID: AMOPIXEL_IDENTIFIER not an object or 'getVisitorUid()' function not found");return null}var e=AMOPIXEL_IDENTIFIER.getVisitorUid();if(!aT(e)){u("AmoCrmUID: visitor_uid value must be a string");return null}return e}};var av=function(){for(var di in bJ){var e=bJ[di]();if(e===null){continue}c4(di,e,cE)}};var a7=function(){return["_ym_uid","_ga"].concat(J(bJ))};var x=function(dm){var dl={"%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FC":"%D1%8C","%FB":"%D1%8B","%FA":"%D1%8A","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D0":"%D0%A0","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DC":"%D0%AC","%DB":"%D0%AB","%DA":"%D0%AA","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF"};var dj="";var dk=0;while(dk<dm.length){var di=dm.substring(dk,dk+3);if(Object.prototype.hasOwnProperty.call(dl,di)){dj+=dl[di];dk+=3}else{dj+=dm.substring(dk,dk+1);dk++}}try{return decodeURIComponent(dj)}catch(dn){return null}};b6.roistatVersion=S;var bp,cg=bd(["9418029803765486301","053353545780959565"]),ad=bd(["22296927710284928081","27072437079523370821","4897604717310987939","053353545780959565"]),k,ce=true,ck=G.location.href,a8="",aN="",bf=new Date().getTime(),cL=false,cs=b6.roistatPhonePrefix?b6.roistatPhonePrefix:"",dd=b6.roistatPhonePrefixBind?b6.roistatPhonePrefixBind:"",P=b6.roistatCalltrackingScripts&&b6.roistatCalltrackingScripts.join?b6.roistatCalltrackingScripts.join(","):"";var j,c4;j=b6.roistatGetCookie=function(e){var di=G.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return di?ay(di[1]):bw};c4=b6.roistatSetCookie=function(dk,dm,dj){dj=dj||{};var di=dj.expires;if(typeof di=="number"&&di){var dp=new Date();dp.setTime(dp.getTime()+di*1000);di=dj.expires=dp}if(di&&di.toUTCString){dj.expires=di.toUTCString()}dm=encodeURIComponent(dm);var e=dk+"="+dm;for(var dl in dj){e+="; "+dl;var dn=dj[dl];if(dn!==true){e+="="+dn}}G.cookie=e};var bv=function(di,dk,dj){var e=di[dk];di[dk]=function(){if(e){e.apply(this,arguments)}dj.apply(this,arguments)}};var ac=function(dj,di,dk){if(dj.addEventListener){dj.addEventListener(di,dk,false);return}var e="on"+di;if(dj.attachEvent){dj.attachEvent(e,dk);return}if(e in dj){bv(dj,e,dk);return}if(di in dj){bv(dj,di,dk);return}u("Handler could not be attached")};var s=function(dk,dj){var di=dk.length;for(var e=0;e<di;e++){dj(dk[e])}};var J=function(e){var di=[];be(e,function(dj,dk){di.push(dj)});return di};var be=function(e,dj){for(var di in e){if(Object.prototype.hasOwnProperty.call(e,di)){dj(di,e[di])}}};var bl=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var aK=function(di){if(typeof di!=="object"){return false}for(var e in di){if(di.hasOwnProperty(e)){return true}}return false};var cY=function(dj){try{var di=JSON.parse(dj);if(di&&typeof di==="object"){return di}}catch(dk){}return null};if(G.getElementsByClassName==bw){G.getElementsByClassName=function(di){var e=[];var dm=new RegExp("\\b"+di+"\\b");var dl=this.getElementsByTagName("*");for(var dk=0;dk<dl.length;dk++){var dj=dl[dk].className;if(dm.test(dj)){e.push(dl[dk])}}return e}}var aA=function(){return String.fromCharCode};var cA=function(dj){var e="";for(var di=0;di<dj.length;++di){e+=aA()(cC^dj.charCodeAt(di))}return e};var aH=function(e){return encodeURIComponent(cA(ca.encode(e)))};var ca={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(dj){var e="";
var dr,dp,dm,dq,dn,dl,dk;var di=0;dj=ca._utf8_encode(dj);while(di<dj.length){dr=dj.charCodeAt(di++);dp=dj.charCodeAt(di++);dm=dj.charCodeAt(di++);dq=dr>>2;dn=((dr&3)<<4)|(dp>>4);dl=((dp&15)<<2)|(dm>>6);dk=dm&63;if(isNaN(dp)){dl=dk=64}else{if(isNaN(dm)){dk=64}}e=e+this._keyStr.charAt(dq)+this._keyStr.charAt(dn)+this._keyStr.charAt(dl)+this._keyStr.charAt(dk)}return e},decode:function(dj){var e="";var dr,dp,dm;var dq,dn,dl,dk;var di=0;dj=dj.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(di<dj.length){dq=this._keyStr.indexOf(dj.charAt(di++));dn=this._keyStr.indexOf(dj.charAt(di++));dl=this._keyStr.indexOf(dj.charAt(di++));dk=this._keyStr.indexOf(dj.charAt(di++));dr=(dq<<2)|(dn>>4);dp=((dn&15)<<4)|(dl>>2);dm=((dl&3)<<6)|dk;e=e+String.fromCharCode(dr);if(dl!=64){e=e+String.fromCharCode(dp)}if(dk!=64){e=e+String.fromCharCode(dm)}}e=ca._utf8_decode(e);return e},_utf8_encode:function(di){di=di.replace(/\r\n/g,"\n");var e="";for(var dk=0;dk<di.length;dk++){var dj=di.charCodeAt(dk);if(dj<128){e+=String.fromCharCode(dj)}else{if((dj>127)&&(dj<2048)){e+=String.fromCharCode((dj>>6)|192);e+=String.fromCharCode((dj&63)|128)}else{e+=String.fromCharCode((dj>>12)|224);e+=String.fromCharCode(((dj>>6)&63)|128);e+=String.fromCharCode((dj&63)|128)}}}return e},_utf8_decode:function(e){var dj="";var dl=0;var dm=0;var dk=0;var di=0;while(dl<e.length){dm=e.charCodeAt(dl);if(dm<128){dj+=String.fromCharCode(dm);dl++}else{if((dm>191)&&(dm<224)){dk=e.charCodeAt(dl+1);dj+=String.fromCharCode(((dm&31)<<6)|(dk&63));dl+=2}else{dk=e.charCodeAt(dl+1);di=e.charCodeAt(dl+2);dj+=String.fromCharCode(((dm&15)<<12)|((dk&63)<<6)|(di&63));dl+=3}}}return dj}};var bs=function(){return G[aA()(99,111,111,107,105,101)]};var an=function(){c8();var e={c:cR()};return aH(JSON.stringify(e))};var cn=function(){var e=o();return(e===bw||e===null)?cc:e};var cR=function(){var e=[];for(var di in b0.cookies){if(!Object.prototype.hasOwnProperty.call(b0.cookies,di)){continue}e.push(di+"="+b0.cookies[di])}return e.join("; ")};var c8=function(){var e=m();for(var di in e){if(!Object.prototype.hasOwnProperty.call(e,di)){continue}b0.cookies[di]=e[di]}};var al=function(e){c4(cM,e,br());b0.source.marker=e};var ai=function(){return j(cM)};var g=function(){be(b6.roistat.page.params,function(di,e){b0.pageParams[di]=e})};var m=function(){var dk=bs();var dl=dk.split("; ");var e={};for(var dj=0;dj<dl.length;dj++){var dp=dl[dj];if(dp===""){continue}var di=dp.split("=");if(di.length<2){continue}var dn=di[0].trim();var dm=di[1].trim();e[dn]=dm}return e};var h=function(){return aA()(104,97,115,104)};var aG=function(e){return e.split("http://").join("").split("https://").join("").split("#")[0].split("?")[0].split("www.").join("").replace(/\/+$/,"")};var bV={isAvailable:function(){var di=false;if(!b6.sessionStorage||!b6.sessionStorage.setItem||!b6.sessionStorage.getItem||!b6.sessionStorage.removeItem){return di}try{b6.sessionStorage.setItem("testKey","testValue");di=b6.sessionStorage.getItem("testKey")==="testValue";b6.sessionStorage.removeItem("testKey")}catch(dj){return false}return di},remove:function(e){if(this.isAvailable()){b6.sessionStorage.removeItem(e)}},setObject:function(e,di){if(this.isAvailable()){b6.sessionStorage.setItem(e,JSON.stringify(di))}},getObject:function(di){var e=null;if(this.isAvailable()){e=b6.sessionStorage.getItem(di);e=JSON.parse(e)}return e},set:function(e,di){if(this.isAvailable()){b6.sessionStorage.setItem(e,di)}},get:function(di){var e=null;if(this.isAvailable()){e=b6.sessionStorage.getItem(di)}return e}};var b3={isAvailable:function(){var di=false;if(!b6.localStorage||!b6.localStorage.setItem||!b6.localStorage.getItem||!b6.localStorage.removeItem){return di}try{b6.localStorage.setItem("testKey","testValue");di=b6.localStorage.getItem("testKey")==="testValue";b6.localStorage.removeItem("testKey")}catch(dj){return false}return di},remove:function(di){if(this.isAvailable()){b6.localStorage.removeItem(di)}else{var e=new Date(1970,1,1);c4(di,"",{expires:e.toUTCString()})}},setObject:function(e,di){if(this.isAvailable()){localStorage.setItem(e,JSON.stringify(di))}},getObject:function(di){var e=null;if(this.isAvailable()){e=localStorage.getItem(di);e=cY(e)}return e},set:function(e,di){if(this.isAvailable()){localStorage.setItem(e,di)}else{c4(e,di,cE)}},save:function(di,dj,e){if(this.isAvailable()){localStorage.setItem(di,dj)}c4(di,dj,e)},get:function(di){var e=null;if(this.isAvailable()){e=localStorage.getItem(di)}if(e===null){e=j(di)}return e}};var bS=function(){return !bR(G.referrer)?G.referrer:null};var R=function(e){return typeof e==="function"};var dh=function(e){return typeof e==="object"};var aT=function(e){return typeof e==="string"};var V=function(dk,dj){dj=typeof dj!=="undefined"?dj:false;var dl=function(dp){var dn=null;var dq=new RegExp("[#&?]("+dk+"=[^#&?]+)");if(dq.test(dp)){dn=RegExp.$1.substring(RegExp.$1.indexOf("=")+1)}var dm=ay(dn);return dn&&dm?dm:dn};var e=dl(ck);if(dj){var di=G.referrer;if(e===null&&di){e=dl(di)}}return e};var cQ=function(di,dj){var e=false;
if(di&&dj){e=di.split(dj).join("")!==di}return e};if(V(bZ)==="1"||m()[bZ]==="1"){bj=true}var cv=function(){var e="multiwidget_only";return V(e)==="1"||m()[e]==="1"};var aE=function(){return cv()?b6.roistatMultiWidgetOnly:b6.roistatOnlineChatOnly};var c7=function(){var di=aX()==="86ee03e4ba0f978620d7a0ee0e2e51dc"||aX()==="4";var e=b6.location.host==="cloud.roistat.com"&&b6.location.pathname!=="/user/login"&&b6.location.pathname!=="/user/register";var dk=aX()==="349ac99f64416756d4a18e91c71dc95f";var dj=b6.location.host==="datyson.ru"&&b6.location.pathname==="/cloud.html";if((di&&!e)||(dk&&!dj)){u("Current project is Roistat but page is not cloud.roistat.com. Drop init multiwidget");return true}return false};var a2=function(){if("https:"===G.location.protocol){return"https:"}else{return"http:"}};var Q=function(di){var e=G.createElement("img");e.src=di;u("sendRequestByUrl: "+di)};var aP=function(di){u("sendApiRequestJSONP: init with url "+di);var e=G.createElement("script");e.onload=e.onreadystatechange=function(){var dk=this.readyState?this.readyState:"unknown";u("sendApiRequestJSONP: script state changed to "+dk)};e.src=di;e.type="text/javascript";e.async=true;var dj=G.getElementsByTagName("script")[0];dj.parentNode.insertBefore(e,dj);u("sendApiRequestJSONP: script appended")};var ci=function(){var di=G.createElement("link"),e=G.getElementsByTagName("head");di.setAttribute("rel","stylesheet");di.setAttribute("href",a2()+"//"+w+"/dist/module.css?"+S);if(e.length>0){e[0].appendChild(di)}};var b9=function(){return cd()||df()};var cd=function(){return a9()!==null};var df=function(){return b5()!==null};var cK=function(){var e=cH();if(e!==null){c4(bY,e,br())}};var cH=function(){return a9()||b5()||null};var a9=function(){return V("roistat_visit")};var b5=function(){return b0.visitFromUser};var a=function(di,e){if(!e&&(b0.isSettingsUpdating||!G.hasFocus())){u("Already updating settings or document not in focus, return");return}var dj=M()+"/get-settings?v="+S+"&visit="+di;u("Request new settings");b0.isSettingsUpdating=true;aP(dj)};var aL=function(){return b3.get(aU)>0};var cZ=function(){b3.set(aU,1)};var au=function(){b3.remove(bO);b3.remove(bm);b3.remove(bN);b3.remove(bi);b3.remove(B);b3.remove(cx);b3.remove(cN);b3.remove(f)};var b1=function(){var dl=function(){return b3.get(cp)};var dk=function(){b3.set(cp,z)};var di=function(){return typeof dl()==="string"};var e=function(){var dm=Number(dl())>z;u("Settings Version: settings version change status - "+dm);return dm};var dj=function(){var dm=1000*60*60*24;var dq=cV();var dp=b8()-dq;var dn=dp>dm;u("Settings Version:: expiration day check: lastUpdateTime="+dq+", _lastUpdateTimeDiff="+dp+", _oneDayDiffInMs="+dm+", result="+(dn?1:0));return dn};if(!di()){u("Settings Version: set settings version up to 1");dk()}if(dj()||e()){u("Settings Version: clear settings");au()}};var da=function(){u("Call: Init");u("Counter version: "+S);if(V("roistat_ab_demo")==="1"){u("Roistat initialisation rejected: ab test preview mode");return}ci();bc();cu();if((!ak()||dg())&&!aE()){cL=true;by()}else{b1();cK();var e=o();bE();a0();cI();roistat.visit=e;b0.source.marker=ai();b6.roistat.geo=b3.getObject(l);var di=aL();if(!di){a(e)}else{cy()}}};var K=function(dj){if(!dj.isEnabled){return true}var e=new Date();var dr=new Date().toISOString();var dn=e.getUTCDay()===0?7:e.getDay();var dp=dn===6||dn===7;var dm=new Date(dj.weekdaysTime.from).toISOString();var di=new Date(dj.weekdaysTime.to).toISOString();var ds=new Date(dj.weekendsTime.from).toISOString();var dk=new Date(dj.weekendsTime.to).toISOString();var dq=false;for(var dl=0;dl<dj.days.length;dl++){if(dn===dj.days[dl]){dq=true}}if(!dq){return false}if(dp){return dr>=ds&&dr<=dk}return dr>=dm&&dr<=di};var bc=function(){u("Call: initMarker");bp=cb();u("Call: inited marker: "+bp)};var cu=function(){u("Call: initReferrer");k=bS();u("Call: end initReferrer: "+k)};var bR=function(dj){if(!dj){return true}var e=a1(dj);var di=a1(G.domain);if(e===di){return true}var dk=bM();if(dk===null){return false}if(cQ(e,dk)&&cQ(di,dk)){return true}return false};var bM=function(){if(typeof cE.domain==="string"&&cE.domain!==""){return a1(cE.domain)}return null};var a1=function(e){var di=e.split("http://").join("").split("https://").join("").split("www.").join("");return di.split("/")[0]};var cb=function(){var dm=j(i)>0;var dp=null;var dj=function(ds){return ds.split("_").join(":u:")};var dr=function(dt){var ds=false;s(aS,function(du){if(dt.indexOf(du)>-1){ds=true}});return ds};var dq=function(){var ds=false;var dt;dt=V(H,dm);if(dt!==null){dp=dt;ds=true}dt=V(cr,dm);if(dt!==null){dp=dt;ds=true}return ds};var dk=function(){var ds=false;var dt=ai();if(dt){dp=dt;ds=true;ce=false}return ds};var di=function(){var ds=false;var du=V("utm_source",dm);if(du!==null){ds=true;dp=":utm:"+dj(du);var dw=["utm_medium","utm_campaign","utm_content","utm_term"];var dt;for(var dv=0;dv<dw.length;dv++){dt=V(dw[dv],dm);if(dt!==null){dp=dp+"_"+dj(dt)}}}return ds};var dl=function(){var du,dt,ds=false;
dt=V("_openstat",dm);if(!dt){return false}if(dn(dt)){du=dt}else{du=encodeURI(ca.decode(dt));if(!dn(du)){du=dt}}if(du){du=dj(du).split(";").join("_");dp=":openstat:"+du;ds=true}return ds};var dn=function(ds){return ds.match(/^([^;]*(;[^;]*){3})$/)!==null};var e=function(){var ds=false;var dt=G.referrer;if(bR(dt)){return ds}var du=V("from",dm);if(du!==null&&!cQ(du,"http")){if(!dr(du)){ds=true;dp=dj(du)}}return ds};if(dq()){u("Init marker: init from RS param "+dp);return dp}if(di()){u("Init marker: init from UTM "+dp);return dp}if(dl()){u("Init marker: init from OpenStat "+dp);return dp}if(e()){u("Init marker: init from custom tag "+dp);return dp}u("Init marker: try init from cookie "+dp);dk();return dp};var o=function(){return b3.get(bY)};var X=function(){u("Call: saveReferrer");b3.set(aB,k)};var bU=function(){u("Call: removeReferrer");b3.remove(aB)};var cX=function(){c4(a6,ay(bp),br())};var cI=function(){u("Call: refreshPromoCode");if(aE()){u("PromoCode: Shut down because only online chat need to be inited");return}var e=function(){return j(bY)};aq(e());if(!b6.onload){b6.onload=function(){aq(e())}}setTimeout(function(){aq(e())},50);setTimeout(function(){aq(e())},200);setTimeout(function(){aq(e())},2000);setTimeout(function(){aq(e())},10000)};b6.roistatPromoCodeRefresh=cI;var c1=function(){var e=[];var di=G.getElementsByClassName(af);if(di&&di.length){e=di}return e};var aq=function(e){var dk=c1();u("setPromoCode: "+e+" in "+dk.length+" elements");for(var dj=0;dj<dk.length;dj++){var di=dk[dj];di.innerHTML=e?e:""}};var bB=function(){var dj=cb(),di=j(a6),dl=dj!==null,dk=true;var dn=ay(ay(dj)).toLowerCase().split("+").join(" "),dm=ay(ay(di)).toLowerCase().split("+").join(" ");if(dj&&di){dk=dn!==dm}var e=dl&&dk;aN="Call: needOverrideByMarker (result "+(e?"true":"false")+") with current "+dj+":"+dn+" and old "+di+":"+dm;u(aN);return e};var aF=function(){var di=function(dr){return/[\u0400-\u04FF]/.test(dr)};var dq=false,dm=k,e=b3.get(aB),dp=b6.location.host;if(!dm||!dp){u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), skip because one of params is empty");return dq}dp=a1(dp);dm=ay(dm);e=ay(e);var dk=a1(dm);if(cQ(dm,"xn--")&&di(dp)){u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), skip because of bugs with punycode in FF");return dq}if(!dk){u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), skip because current referrer is null");return dq}if(!e){dq=!cQ(dk,dp);u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), compare current referrer and host");return dq}if(cQ(dm,e)){u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), skip because the same referrer");return dq}var dn=dp.split(".").length>2&&dk.split(".").length>2;var dl=b6.roistatCookieDomain!==bw&&b6.roistatCookieDomain!==dp;var dj=dk.split(".").slice(1).join(".")===dp.split(".").slice(1).join(".");if(dn&&dl&&dj){u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+"), skip because sub domains of same domain");return dq}dq=!(cQ(dk,dp)||(cQ(dp,dk)));u("Call: needOverrideByReferrer (result "+(dq?"true":"false")+") referrerHost: "+dk+", currentHost: "+dp);return dq};var bF=function(){return V("utm_nooverride")==="1"};var dg=function(){return !b9()&&!bF()&&(bB()||aF())};var bG=function(di,e){return(di&&e&&di!=e)};var a4=function(dj){var e=["cookieExpire"];var dl=dj.leadHunterEnabled;if(Number(b3.get(bx))!==Number(dj.leadHunterEnabled)){b3.set(bx,Number(dj.leadHunterEnabled))}if(dl){var dk={expires:N,path:"/"};if(cE.domain){dk.domain=cE.domain}c4(Y,1,dk)}for(var di in dj){if(!Object.prototype.hasOwnProperty.call(dj,di)){continue}if(!dl&&di.indexOf("leadHunter")>=0&&di.indexOf("leadHunterTargetPagesMap")===-1){continue}if(!ap(e,di)){b3.set("roistat_"+di,dj[di])}}};var cF=function(e){if(!e){return}roistat.multiwidget={isEnabled:e.is_enabled,vk:{isEnabled:e.vk.is_enabled,link:roistat.multiwidget.vk.link||e.vk.link},fb:{isEnabled:e.fb.is_enabled,link:roistat.multiwidget.fb.link||e.fb.link},telegram:{isEnabled:e.telegram.is_enabled,link:roistat.multiwidget.telegram.link||e.telegram.link}};if(Number(b3.get(a3))!==Number(e.is_enabled)){b3.set(a3,Number(e.is_enabled))}if(Number(b3.get(bQ))!==Number(e.vk.is_enabled)){b3.set(bQ,Number(e.vk.is_enabled))}if(b3.get(cz)!==roistat.multiwidget.vk.link){b3.set(cz,roistat.multiwidget.vk.link)}if(Number(b3.get(O))!==Number(e.fb.is_enabled)){b3.set(O,Number(e.fb.is_enabled))}if(b3.get(cT)!==roistat.multiwidget.fb.link){b3.set(cT,roistat.multiwidget.fb.link)}if(Number(b3.get(co))!==e.telegram.is_enabled){b3.set(co,Number(e.telegram.is_enabled))}if(b3.get(bh)!==roistat.multiwidget.telegram.link){b3.set(bh,roistat.multiwidget.telegram.link)}};var b7=function(e){roistat.onlineChat.isEnabled=e.is_enabled;if(Number(b3.get(cx))!==Number(e.is_enabled)){b3.set(cx,Number(e.is_enabled))}roistat.onlineChat.isAvailableForCurrentUserAgent=e.advanced_settings.is_available_for_current_user_agent;roistat.onlineChat.pagesFilter=e.advanced_settings.pages_filter;b3.setObject(A,e.advanced_settings)
};var v=function(e){b6.roistat.geo=e;b3.setObject(l,e)};var db=function(dk,dm,dj,di,dl,e,dn){a4(dk);roistat.callTracking.enabled=dm.is_enabled;roistat.emailtracking.loaded=true;roistat.emailtracking.email=dj.email;roistat.emailtracking.trackingEmail=dj.trackingEmail;roistat.emailtracking.emails=dj.emails;roistat.proxyForms.loaded=true;roistat.proxyForms.settings=dl;cF(e);b7(dn);v(di)};b6.roistatModuleSetVisitCookie=function(dm,dv,dk,di,du,dq,e,dw,dp){u("Call: roistatModuleSetVisitCookie("+dm+")");var dr;if(typeof dk.cookieExpire!=="number"){dr=br().expires}else{dr=dk.cookieExpire}var dn=j(bY);var dt={expires:dr,path:"/"};if(cE.domain){dt.domain=cE.domain}c4(bY,dm,dt);if(!(j(bY)>0)){b3.save(bY,dm,dt)}if(!b3.get(aQ)){var dj={expires:10*365*24*60*60,path:"/"};if(cE.domain){dj.domain=cE.domain}b3.save(aQ,dm,dj)}var ds=dk.abTests;if((typeof ds!=="undefined")&&b3.isAvailable()){b3.setObject("abTesting",ds)}applyTests();var dl=dk.isNeedToListenRequests;if((typeof dl!=="undefined")&&b3.isAvailable()){b3.set(aj,dl)}aq(dm);if(dv){al(dv);c4(a6,dv,dt)}u("Call: pre renderPromoCode");a0();cI();if(bG(dn,dm)){u("roistatModuleSetVisitCookie: visit changed from "+dn+" to "+dm)}if(b6.roistatCallback!==bw){b6.roistatCallback(dm,dv)}if(!dw){dw={}}db(dk,di,du,dq,e,dw.multiwidget_settings,dp);roistat.callTracking.phone=di.phone;roistat.callTracking.sessionTime=di.sessionTime;roistat.callTracking.replacementClasses=di.replacementClasses;roistat.callTracking.phoneScriptsJson=di.scripts;roistat.visit=dm;cU();cZ();cy()};b6.roistatUpdateSettings=function(e){u("Set settings.");b0.isSettingsUpdating=false;db(e.js_settings,e.calltracking,e.emailtracking,e.geo,e.proxy_forms,e.multiwidget.multiwidget_settings,e.online_chat);cZ();cy()};var ak=function(){var e;if(b6.roistatIsInitVisit===true){e=false}else{e=j(bY)>0}u("Call: alreadyVisited (return "+(e?"true":"false")+")");return e};var c=function(e){return encodeURIComponent?encodeURIComponent(e):encodeURI(e)};var aW=function(){return k?c(k):""};var M=function(){return a2()+"//"+w+"/api/site/"+ae+"/"+aX()};var cf=function(){var e={expires:1,path:"/"};if(cE.domain){e.domain=cE.domain}c4(bq,"",e)};var by=function(){u("Call: setVisitIdCookie");var di=function(){var dr=aX(),dn=aW(),dk=b6.roistatIsInitVisit===true?o():0,dq=j(bq),dl=b3.get(aQ);dq=dq?dq:"";dl=dl?dl:"";bp=bp&&(!aF()||ce)?ay(ay(bp)):"";var dp=encodeURIComponent(ck);u("Calltracking: enabled="+bP.callTrackingEnabled+",manual="+bP.callTrackingManual);var dm=JSON.stringify(b6.roistat.page.params);return M()+"/addVisit?v="+S+"&marker="+encodeURIComponent(bp)+"&visit="+dk+"&first_visit="+dl+"&phone_prefix="+cs+"&phone_prefix_bind="+dd+"&phone_scripts_bind="+P+"&referrer="+dn+"&page="+dp+"&ab="+c(dq)+"&"+h()+"="+an()+(dm==="{}"?"":"&page_params="+encodeURIComponent(dm))+((!bP.callTrackingEnabled||bP.callTrackingManual)?"&call_tracking_disabled=1":"")};var e=function(dk){setTimeout(function(){u("Call: setVisitIdCookie script creation after timeout");var dl=G.createElement("script");dl.onload=dl.onreadystatechange=function(){var dn=this.readyState?this.readyState:"unknown";u("Call: setVisitIdCookie script state changed to "+dn)};dl.src=dk;dl.type="text/javascript";dl.async=true;dl.id=U;var dm=G.getElementsByTagName("script")[0];dm.parentNode.insertBefore(dl,dm);u("Call: setVisitIdCookie appended "+((G.getElementById(U))?"true":"false"));u("Call: sendJSONPRequest to URL "+dk);cf()},bP.jsonpRequestTimeout)};if(bp){al(bp);cX()}av();var dj=di();e(dj);k?X():bU()};var bE=function(){u("Call: sendAbTests");var di=function(){var dm=aX(),dl=j(bY);return a2()+"//"+w+"/site-api/"+aC+"/"+dm+"/visit/"+dl+"/addAbVariant"};var dj=j(bq);if(!dj){return}var dk=di();dk=dk+"?ab="+c(dj);var e=G.createElement("img");e.src=dk;cf()};var aM={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(aM.Android()||aM.BlackBerry()||aM.iOS()||aM.Opera()||aM.Windows())}};var aV={isIE:function(dj,dl){var dm="IE",di=G.createElement("B"),e=G.documentElement,dk;if(dj){dm+=" "+dj;if(dl){dm=dl+" "+dm}}di.innerHTML="<!--[if "+dm+']><b id="iecctest"></b><![endif]-->';e.appendChild(di);dk=!!G.getElementById("iecctest");e.removeChild(di);return dk}};var b8=function(){return new Date().getTime()};var cV=function(){return b3.get(W)};var aa=function(){var e="";b6.onerror=function(dn,dm,dj,dl,dk){var di=!dl?"":", column: "+dl;di+=!dk?"":", error: "+dk;e=e+", Error: "+dn+", url: "+dm+", line: "+dj+di};setTimeout(function(){var dq=false,dr="";var dl=c1();for(var dp=0;dp<dl.length;dp++){var dk=dl[dp];if(dk!==null&&!dk.innerHTML){dq=true;dr="Promo HTML: "+dk.innerHTML}}if(!(j(bY)>0)){dq=true;dr=dr+"; roistat_visit = "+j(bY)}if(dq){var dj=G.getElementById(U);var di=dj?1:0;var dm=b6.navigator.userAgent;
dr=encodeURIComponent(dr);var dn=G.createElement("img");dn.src=a2()+"//"+w+"/site-api/"+aC+"/"+aX()+"/debug?message="+dr+"&agent="+dm+"&"+h()+"="+an()+"&jserror="+e+"&scriptResponse="+di+"&version="+S+"&debug="+a8}},20000)};var bu=function(){var dj=G.getElementsByTagName("body");var dk=G.documentElement;var di=0,dl=0;if(dj.length){var e=dj[0];di=b6.innerWidth||dk.clientWidth||e.clientWidth;dl=b6.innerHeight||dk.clientHeight||e.clientHeight}else{di=b6.innerWidth||dk.clientWidth;dl=b6.innerHeight||dk.clientHeight}return{width:di,height:dl}};var a0=function(){var dm=G.getElementsByClassName("roistat-promo-wrap");if(dm.length){u("PromoCode: old promo code length - exit");return}if(aE()){u("PromoCode: Shut down because only online chat need to be inited");return}var dk=function(){var du=G.createElement("div");du.innerHTML=roistatPromoCode;var ds=G.getElementsByTagName("body");if(ds.length){ds[0].appendChild(du)}u("PromoCode: appended to body "+roistatPromoCode.length);var dt=G.getElementsByClassName("roistat-promo-wrap")[0];if(!dt){u("PromoCode: roistat-promo-wrap not found, skip");return}var dr=dt.style;var dp,dq,dn;setInterval(function(){dp=bu();dq=dt.offsetWidth;dn=dt.offsetHeight*2;switch(roistatPosition){case"top_left":dr.left=0;dr.top=0;break;case"top":dr.left=((dp.width-dq)/2)+"px";dr.top=0;break;case"top_right":dr.right=0;dr.top=0;break;case"left":dr.left=0;dr.top=((dp.height-dn)/2)+"px";break;case"right":dr.right=0;dr.top=((dp.height-dn)/2)+"px";break;case"bottom_left":dr.left=0;dr.bottom=0;break;case"bottom":dr.left=((dp.width-dq)/2)+"px";dr.bottom=0;break;case"bottom_right":dr.right=0;dr.bottom=0;break;default:dr.left=0;dr.top=0}},500)};var e=b3.getObject("promo_code_options");if(e){b6.roistatPromoCode=e.template;b6.roistatPosition=e.position;dk()}else{var dl=G.getElementsByTagName("head")[0]||G.documentElement;var dj=G.createElement("script");dj.src=a2()+"//"+w+"/site-api/"+aC+"/"+aX()+"/getPromoCode";dl.insertBefore(dj,dl.firstChild);u("PromoCode: loading started");var di=false;dj.onload=dj.onreadystatechange=function(){if(!di&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){di=true;dj.onload=dj.onreadystatechange=null;if(dl&&dj.parentNode){dl.removeChild(dj)}}if(!di){return}u("PromoCode: loaded");if(typeof roistatPromoCode==="undefined"||roistatPromoCode.length<1){u("PromoCode: is disabled");return}e={template:roistatPromoCode,position:roistatPosition};b3.setObject("promo_code_options",e);dk()}}};var ap=function(di,dj){for(var e=0;e<di.length;e++){if(di[e]===dj){return true}}return false};var u=function(di){var dj=b8()-bf;var e="["+(dj/1000)+"s] "+di;a8=a8+"; "+e;if(typeof console!=="undefined"&&console.log&&bj){console.log(e)}};var bt=function(e,di){if(!cg){return}aP(e+(di!==""?"?log="+encodeURIComponent(di):""))};var E=function(di){if(!ad||di===""){return}var e=M()+"/log";aP(e+"?log="+encodeURIComponent(di))};var aD=function aD(){var dl=b6.onpopstate;var dm=b6.history.pushState;var e=b6.history.replaceState;ac(b6,"popstate",function dk(dn){u("[Roistat]: popstate event catch");bW();if(Z()&&typeof dl==="function"){dl(dn)}});ac(b6.history,"pushState",function dj(dp,dq,dn){u("[Roistat]: pushState event catch");bW();if(Z()&&typeof dm==="function"){dm.apply(this,[dp,dq,dn])}});ac(b6.history,"replaceState",function di(dp,dq,dn){u("[Roistat]: replaceState event catch");bW();if(Z()&&typeof e==="function"){e.apply(this,[dp,dq,dn])}})};(function bC(){aD();if(b6.onRoistatModuleLoaded!==bw&&typeof b6.onRoistatModuleLoaded==="function"){b6.onRoistatModuleLoaded()}})();var bz=function(di){var dn=function(dv,dt){var ds;if(cQ(dt,"*")){var du=new RegExp(dt.split("*").join(".*"));ds=du.test(dv)}else{ds=dv===dt}u("LeadHunter: compare current: "+dv+", setting: "+dt+" with result = "+(ds?1:0));return ds};var e=b6.location.href,dk=false,dj=false,dq="",dl=0,dp;dp=di?di.split(","):[];if(!e||dp.length===0){dk=true}else{dq=aG(e);var dr;for(var dm=0;dm<dp.length;dm++){dr=dp[dm].split("www.").join("").split("http://").join("").split("https://").join("").replace(/\/+$/,"");if(/^!/.test(dr)){if(dn(dq,dr.split(/^!/).join(""))){dj=true;break}}else{dl++;if(dn(dq,dr)){dk=true;break}}}}if(dj){u('LeadHunter: current page "'+dq+'" is disabled by list');return false}if(!dk&&dl>0){u('LeadHunter: current page "'+dq+'" is not listed');return false}u('LeadHunter: current page "'+e+'", cleaned: "'+dq+'" is not disabled in '+dp.length+" list of pages");return true};try{da()}catch(ch){E(ch)}(function aZ(){var dE="empty",dn=false,di=true,dx=false;var dB={roistat_visit:j(bY),marker:bp,user_agent:b6.navigator.userAgent,current_page:{title:G.title,href:b6.location.protocol+"//"+b6.location.host+b6.location.pathname,},};var dF=function(dJ,dI,dH){if(dJ.addEventListener){dJ.addEventListener(dI,dH,false)}else{if(dJ.attachEvent){dJ.attachEvent("on"+dI,dH)}else{u("Handler could not be attached")}}};var dz=function(dJ,dH){if(dJ===bw||typeof dH!=="string"||dH.length===0){return}var dI=dJ.getElementsByClassName(dH);if(dI===bw||dI.length===0){return
}return dI[0]};var dG=function(dH){return typeof dH==="object"&&dH!==null};var dp=function(dH,dJ,dI){if(dG(dH)){if(dI){dH.classList.add(dJ);return}dH.classList.remove(dJ)}};var dC={leadHunter:function(){var ft="roistat-lh-form",d5="roistat-lh-form",fw="roistat-lh-head-text",ej="roistat-lh-head",d1="roistat-lh-thank-you",eK="roistat-lh-thank-you",dM="roistat-lh-close",dN="roistat-lh-submit",es="roistat-lh-hidden",e8="roistat-lh-wrap",d7="roistat-lh-popup-wrapper",eJ="roistat-lh-popup",fv="roistat-lh-agreement",eF="roistat-lh-agreement roistat-lh-mobile",fK="roistat-lh-agreement-input",fk="roistat-lh-agreement-link",dH="roistat-lh-agreement-doc",fp="roistat-lh-alert-row",eR="roistat-lh-agreement",eE="roistat-lh-popup-iframe",eT="roistat_leadHunterUrl",fm="roistat_leadHunterAppearanceUrl",ew="roistat_leadHunterTargetPagesList",d0="roistat_leadHunterCaught",e0="roistat_leadHunterMinTime",en="roistat_leadHunterAutoShowTime",eX="roistat_leadHunterPulsatorEnabled",eh="roistat_leadHunterScriptsCaught",fL="roistat_leadHunterScriptsShownCount",eC="roistat-lh-load-done",d6="roistat-lh-close-modal",fa="roistat-lh-script-settings",e9="roistat-lh-setting-size",fq="roistat-lh-before-submit",eU="roistat-lh-before-submit-done",fy="roistat-lh-after-submit",fd="roistat-lh-event-data",fe="roistat-lh-translate-form",fI={topLeft:{bottom:"80%",right:"auto"},topRight:{bottom:"80%",right:"3%"},bottomRight:{bottom:"10%",right:"3%"},bottomLeft:{bottom:"10%",right:"auto"}};var dZ=0.3,eb=0.001,d2=false,ee=0,d9=0,ef=0,fA=0,ed=0,et=false,dR=false,ec,fo,eM,eS,e7,ei,fJ,fE,fl,fH,dV,fB,e4,eN,eD,dY,dK,er,eg,eo,fi,fr,el,fu,fz,ev;var fD={pulsator:{previousClass:""},leave:{isShowEnabled:false},timeoutId:0};var fx=function(fP){var fO=encodeURIComponent?encodeURIComponent:encodeURI;return fO(fP)};var fc=function(){if(!b6.roistat.leadHunter.isEnabled){return false}if(b6.roistatLeadHunterInited){return false}b6.roistatLeadHunterInited=true;if(b3.get(bx)<1){u("LeadHunter: disabled");return false}return true};var eq=function(){dK=b3.get(eT);if(!dK){u("LeadHunter: not active cause of empty url");return false}er=b3.get(fm);fA=b3.get(e0);ed=b6.roistat.leadHunter.form.autoShowTime===null?b3.get(en):b6.roistat.leadHunter.form.autoShowTime;dn=b3.get(eX)==1;dJ();return true};var ey=function(){return b3.get(d0)>0};var dJ=function(){if(!(j(Y)>0)){u("LeadHunter: not active, expired for this visit");et=true}};var dS=function(fO){eo=fi.src;var fP={version:S,additionalNotifyEmail:b6.roistat.leadHunter.additionalNotifyEmail,projectKey:aX(),language:ab,visitId:cn(),moduleTargetOrigin:b6.location.origin,referrer:b6.location.href,windowWidth:b6.innerWidth||0,iframeWrapperWidth:eS.offsetWidth||0,sendRequestUrl:b3.get(eT),message:eC};fi.contentWindow.postMessage(fP,eo);eZ();if(fO){u("Beta Test on, iframe fired, rise up iframe show count state");dL()}};var eB=function(){dR=true;dQ("click");dS();e6()};var dP=function(){var fO=b6.location.hash;if(!fO){return}if(cQ(fO,"roistat-lead-hunter")){eB()}};var ez=function dX(){u("LeadHunter: binding timeout");if(et){u("LeadHunter: leadhunter is expired, no timeout show allowed");return}if(d2){u("LeadHunter: leadhunter was shown, no timeout show allowed");return}if(ed>0){var fO=(ee-b8())+ed*1000;u("LeadHunter: binding timeout with delay "+fO+" ms");clearTimeout(fD.timeoutId);fD.timeoutId=setTimeout(function(){u("LeadHunter: form auto activate with autoTime = "+ed);if(!d2){u("LeadHunter: show by timeout");dR=true;dQ("auto");dS(true);e6()}},fO)}else{u("LeadHunter: auto show time is not positive, feature disabled")}};var fn=function(){fl.onclick=e7.onclick=eP;fH.onclick=eu;if(dG(fB)){dF(fB,"click",eG)}if(dG(e4)){dF(e4,"change",fM)}var fP=G.getElementsByClassName("roistat-lh-input");if(Array.isArray(fP)){for(var fS=0;fS<fP.length;fS++){dF(fP[fS],"keyup",function(fU){fU=fU||event;var fT=(fU.keyCode?fU.keyCode:fU.which);if(fT==13){eu()}})}}var fQ=b6.onresize;b6.onresize=function(fT){if(fQ){fQ(fT)}fs(fT)};if(!et){var fO=G.onmouseout;G.onmouseout=function(fT){if(fO){fO(fT)}e3(fT)}}if(dn&&!dw()&&dG(ec)){ec.onmouseover=function(){ah(ec,"roistat-lh-pulsator-hover")};ec.onmouseout=function(){bX(ec,"roistat-lh-pulsator-hover")};ec.onclick=function(){eB()}}var fR=b6.onhashchange;b6.onhashchange=function(){if(fR){fR.apply(this,arguments)}dP()}};var fG=function(){if(dn&&!dw()&&dG(ec)){ec.onmouseover=function(){ah(ec,"roistat-lh-pulsator-hover")};ec.onmouseout=function(){bX(ec,"roistat-lh-pulsator-hover")};ec.onclick=function(){eB()}}e7.onclick=eP;fi=G.getElementById(eE);if(dG(fi)){dF(fi,"load",function(){dS();fC()})}var fP=b6.onresize;b6.onresize=function(fR){if(fP){fP(fR)}fs(fR)};if(!et){var fO=G.onmouseout;G.onmouseout=function(fR){if(fO){fO(fR)}if(!Z()){u("ShowLimit: Beta Test off, check cursor usually");e3(fR)}else{u("ShowLimit: Beta Test on, check cursor by caught or max show limit");if(!e5()&&!ea()){u("ShowLimit: Check cursor allowed");e3(fR,true)}}}}var fQ=b6.onhashchange;b6.onhashchange=function(){if(fQ){fQ.apply(this,arguments)}dP()}};var eO=function(fP){var fO=G.getElementsByClassName(fP);
if(fO.length>0){return fO[0]}else{return null}};var eL=function(){var fR=eO("roistat-lh-title");if(dG(fR)&&roistat.leadHunter.form.title){fR.innerHTML=roistat.leadHunter.form.title}var fP=eO("roistat-lh-sub-title");if(dG(fP)&&roistat.leadHunter.form.subTitle){fP.innerHTML=roistat.leadHunter.form.subTitle}var fQ=eO("roistat-lh-thank-you");if(dG(fQ)&&roistat.leadHunter.form.thankYouText){fQ.innerHTML=roistat.leadHunter.form.thankYouText}var fT=eO("roistat-lh-submit");if(dG(fT)&&roistat.leadHunter.form.buttonText){fT.value=roistat.leadHunter.form.buttonText}var fS=eO("roistat-lh-text-label-name");if(dG(fS)&&roistat.leadHunter.form.nameLabel){fS.innerHTML=roistat.leadHunter.form.nameLabel}var fO=eO("roistat-lh-text-label-contact");if(dG(fO)&&roistat.leadHunter.form.contactLabel){fO.innerHTML=roistat.leadHunter.form.contactLabel}};var d8=function(fP,fT,fS){var fO;if(!fP){u("LeadHunter: deactivating, empty form")}else{u("LeadHunter: rendering hidden form")}e7=G.createElement("div");eS=G.createElement("div");eS.innerHTML=fP;e7.className=es;eS.className=es;if(fT&&dn&&fS&&!dw()){var fQ=typeof fS.position==="string"&&fS.position!==""?fS.position:"bottomRight";fO=G.createElement("div");fO.innerHTML=fT;ec=fO.childNodes.item(0);fo=ec.childNodes.item(1);eM=ec.childNodes.item(2).childNodes.item(0);fo.setAttribute("style","background: "+fS.button.background+";");eM.setAttribute("style","fill: "+fS.button.color+";");ec.setAttribute("style","bottom: "+fI[fQ].bottom+";right:"+fI[fQ].right+";");fD.pulsator.previousClass=ec.className;ec.className=es;G.body.appendChild(ec)}G.body.appendChild(e7);G.body.appendChild(eS);ei=G.getElementById(ej);fJ=G.getElementById(d5);fE=G.getElementById(eK);fl=G.getElementById(dM);fH=G.getElementById(dN);dV=G.getElementById(fv);e4=G.getElementById(fK);fB=G.getElementById(fk);eN=G.getElementById(dH);eD=G.getElementById(fp);dY=G.getElementById(eR);var fR=eO(d7);eg=dG(fR)&&fR.getAttribute("data-is-iframe");if(eg){fG()}else{eL();fn();dP();fC()}};var fF=function(fQ){var fP=fQ.button&&fQ.button.background&&fQ.button.color;if(!fP){return}b3.setObject(bN,ev);var fO=typeof fQ.position==="string"&&fQ.position!==""?fQ.position:"bottomRight";if(dG(fo)){fo.setAttribute("style","background: "+fQ.button.background+";")}if(dG(eM)){eM.setAttribute("style","fill: "+fQ.button.color+";")}if(dG(ec)){ec.setAttribute("style","bottom: "+fI[fO].bottom+";right:"+fI[fO].right+";")}};var dW=function(){var fO=b3.get(bO),fQ=b3.get(bm),fP=b3.getObject(bN);d8(ca.decode(fO),ca.decode(fQ),fP)};var ex=function(){var fP=eS.clientWidth,fO=eS.clientHeight;if(dG(eS)){eS.setAttribute("style",eS.getAttribute("style")+" width: "+fP+"px; height: "+fO+"px;")}if(dG(fJ)){fJ.className=es}if(dG(ei)){ei.className=es}if(dG(dV)){dV.className=es}if(dG(fE)){fE.setAttribute("style","width: "+fP+"px; height: "+fO+"px; display: table-cell;");fE.className=d1}setTimeout(function(){u("LeadHunter: close form after timeout");eP()},7000)};var e6=function(){var fP=Math.round((fj()-eS.clientHeight)/2);var fO=Math.round((fN()-eS.clientWidth)/2);if(dG(eS)){eS.setAttribute("style","left: "+fO+"px; top: "+Math.max(0,fP)+"px;")}};var dQ=function(fP){if(b6.roistat.leadHunter.onBeforeAppear){u("LeadHunter: process user defined onBeforeAppear");b6.roistat.leadHunter.onBeforeAppear(fP);if(eg){eZ()}}if(dG(eS)){eS.setAttribute("style","left:20px;top:-20px;opacity:0");eS.className=eJ}if(dG(e7)){e7.className=e8}if(dG(fJ)){fJ.className=ft}if(dG(ei)){ei.className=fw}if(dG(dV)){dV.className=eF}if(dG(fE)){fE.setAttribute("style","");fE.className=es}if(dG(e7)){e7.setAttribute("style","opacity:0;")}d2=true;setTimeout(function(){e7.setAttribute("style","opacity:.5;")},10);var fQ=j(bY),fO=er+"?visit_id="+fQ+"&page="+y();Q(fO);if(b6.roistat.leadHunter.onAfterAppear){u("LeadHunter: process user defined onAfterAppear");b6.roistat.leadHunter.onAfterAppear(fQ,e7,eS,fJ);if(eg){eZ()}}};var fb=function eQ(){ee=b8();dW();u("LeadHunter: form initialized")};var fC=function eA(){u("LeadHunter: tuning appearance for page");if(!bz(b3.get(ew))||(b3.get(aO)&&!b3.get(T))){u("LeadHunter: disabled on page");fD.leave.isShowEnabled=false;clearTimeout(fD.timeoutId);if(dw()){di=false;dt()}if(dG(ec)){ec.className=es}}else{u("LeadHunter: enabled on page");if(!ey()&&!Z()){u("ShowLimit: Beta Test off, bindShowOnTimeout usually");fD.leave.isShowEnabled=true;ez()}if(Z()){u("ShowLimit: Beta Test on, bindShowOnTimeout by caught or max show limit");if(!e5()&&!ea()){u("ShowLimit: bindShowOnTimeout allowed");fD.leave.isShowEnabled=true;ez()}}if(dG(ec)){ec.className=fD.pulsator.previousClass}}};var ek=function e2(){u("LeadHunter: processing single page application state change");ee=b8();fC()};var fh=function eH(){ar(ek);ac(b6,"resize",function(){var fP=600,fR=350,fS=b6.innerWidth,fQ={};if(fS<fP&&fS>fR){fQ={isMobileMarkup:true,isMobileMarkupXs:false};fi.contentWindow.postMessage({sizeSettings:fQ,message:e9},eo);return}if(fS<fR){fQ={isMobileMarkup:false,isMobileMarkupXs:true};fi.contentWindow.postMessage({sizeSettings:fQ,message:e9},eo);
return}fQ={isMobileMarkup:false,isMobileMarkupXs:false};fi.contentWindow.postMessage({sizeSettings:fQ,message:e9},eo)});ac(b6,"message",function fO(fU){var fT=typeof fU.data==="string"?fU.data:fU.data.message;if(fT===fa){fr=fU.data.scriptId;el=fU.data.showsLimit;var fR=b3.getObject(q)!==null;if(fR){fu=fU.data.leadHunterAutoShowTime;fz=fU.data.leadHunterMinTime;fz=fU.data.leadHunterMinTime;ev=fU.data.leadHunterPulsatorSettings;b3.set(e0,fz);b3.set(en,fu);if(ev){b3.set(eX,Number(ev.isEnabled));fF(ev)}}u("ShowLimit: Get lhScriptId: "+fU.data.leadHunterId+" and lhScriptMaxShownCount: "+fU.data.leadHunterMaxShownCount+" from lh widget");eW()}if(fT===d6){eP()}if(fT===e9){fi.setAttribute("style","width: "+fU.data.width+"px !important; height: "+fU.data.height+"px !important;");fs(fU)}if(fT===fq){var fV=fU.data.caughtLeadData;if(b6.roistat.leadHunter.onBeforeSubmit){u("LeadHunter: process user defined onBeforeSubmit");var fQ=b6.roistat.leadHunter.onBeforeSubmit(fV);if(fQ){fV=fQ}}if(!Z()){u("ShowLimit: Beta Test off, catch before submit message, setCookieLeadHunterCaught will run");dT()}else{u("ShowLimit: Beta Test on, catch before submit message, setLeadHunterScriptCaught will run");eY()}var fP=b3.getObject(cl);var fS=fP!==null;var fW=fS&&fV.isNeedCallback===null&&!K(fP);if(fW){fV.isNeedCallback=0}fi.contentWindow.postMessage({caughtLead:fV,message:eU},eo)}if(fT===fy){if(b6.roistat.leadHunter.onAfterSubmit){u("LeadHunter: process user defined onAfterSubmit");b6.roistat.leadHunter.onAfterSubmit({name:fU.data.name,phone:fU.data.phone})}}})};function eZ(){var fO={apiData:b6.roistat.leadHunter.form,message:fd};fi.contentWindow.postMessage(fO,eo)}function eW(){if(!fc()){u("checkLeadHunterLaunch false");return}var fO=b3.getObject(q)!==null;if(fO){dU()}if(!eq()){u("initSettings false");return}u("LeadHunter: activated");fb();fC();fh()}function fj(){return(b6.innerHeight?b6.innerHeight:G.documentElement.clientHeight==0?G.body.clientHeight:G.documentElement.clientHeight)}function fN(){return(b6.innerWidth?b6.innerWidth:G.documentElement.clientWidth==0?G.body.clientWidth:G.documentElement.clientWidth)}function e3(fR,fO){fR=fR||event;ef=fR.clientY;var fP=ef/fj(),fT=d9>0&&d9>fP,fQ=fP<eb,fS=(b8()-ee)>fA*1000;if(fT&&fQ&&!d2&&fS&&fD.leave.isShowEnabled&&!ey()){u("LeadHunter: show modal with because move up ("+d9+" -> "+fP+") and in modal zone and show on leave enabled");dQ("exit");dS(fO);eI(fR)}if(fP<dZ){d9=fP}}function fs(fO){if(dR){e6()}else{fO=fO||event;eI(fO)}}function eI(fT){var fP=fT.type==="message"?fT.data.width:eS.offsetWidth;var fQ=fN();var fO=fT.clientX-Math.round(fP/2)||eS.offsetLeft;fO=Math.max(20,Math.min(fO,fQ-fP-20));var fU=fO+fP>fQ-40;if(fU){var fR=(fO+fP-20)-(fQ-40);fO=fO-fR}var fS=fQ-40>fP?"":"width: "+(fP-40)+"px;";if(dG(eS)){eS.setAttribute("style","left: "+fO+"px; top: 0px; "+fS)}}function dT(){b6.roistatSetCookie(d0,1,cE)}function eP(){if(!Z()){u("ShowLimit: Beta Test off, setCookieLeadHunterCaught");dT()}if(dG(e7)){e7.setAttribute("style","opacity:0")}if(dG(eS)){eS.style.top="-"+eS.offsetHeight*2+"px";setTimeout(function(){eS.className=e7.className=es},500)}}function eu(){var f2=G.getElementById("roistat-lh-phone-input"),fQ=G.getElementById("roistat-lh-name-input"),fS,f0;fS=f2===null?"":f2.value;f0=fQ===null?"":fQ.value;var fX={name:f0,phone:fS,isNeedCallback:null,callbackPhone:null,fields:{}};if(b6.roistat.leadHunter.onBeforeSubmit){u("LeadHunter: process user defined onBeforeSubmit");var fT=b6.roistat.leadHunter.onBeforeSubmit(fX);if(fT){fX=fT}}var fZ=fX.phone.length<1;var f1=fX.phone.indexOf("_")===-1;var fV=!fZ&&f1;var fY=fX.name.length<1;var fP=!fY||!b6.roistat.leadHunter.form.isNameRequired;if(!fV&&dG(f2)){f2.setAttribute("style","border: 2px solid #E0571A;");return}if(!fP&&dG(fQ)){fQ.setAttribute("style","border: 2px solid #E0571A;");return}var fO=dK+"?v="+S+"&lead-hunt-input="+encodeURIComponent(fX.phone)+"&lead-name="+encodeURIComponent(fX.name)+"&visit="+cn();if(fX.isNeedCallback!==null&&fX.isNeedCallback!==bw){fO=fO+"&is_need_callback="+(fX.isNeedCallback>0?1:0)}if(fX.callbackPhone){fO=fO+"&callback_phone="+fX.callbackPhone}if(b6.roistat.leadHunter.additionalNotifyEmail!==null){fO=fO+"&additional_email="+encodeURIComponent(b6.roistat.leadHunter.additionalNotifyEmail)}var fR=0;if(fX.fields&&typeof fX.fields==="object"){for(var fU in fX.fields){if(fX.fields.hasOwnProperty(fU)){++fR}}}if(fR>0){fO=fO+"&fields="+fx(JSON.stringify(fX.fields))}fO=fO+"&t="+b8();var fW=G.createElement("img");fW.src=fO;if(dG(f2)){f2.setAttribute("style","")}if(!Z()){u("ShowLimit: Beta Test off, caught LH usually");dT()}else{u("ShowLimit: Beta Test on, caught LH by set setLeadHunterScriptCaught");eY()}if(!dG(fE)){eP();ep()}else{ex()}if(b6.roistat.leadHunter.onAfterSubmit){u("LeadHunter: process user defined onAfterSubmit");b6.roistat.leadHunter.onAfterSubmit({name:f0,phone:fS})}}function eG(fO){if(fO.preventDefault){fO.preventDefault()}else{fO.returnValue=false}if(dG(eN)){eN.style.display==="block"?eN.style.display="none":eN.setAttribute("style","display: block; padding: 0 30px; width:"+eS.clientWidth+"px;")
}fs()}function fM(){if(dG(fH)){fH.disabled===true?fH.disabled=false:fH.disabled=true}if(dG(eD)){eD.style.display==="block"?eD.style.display="none":eD.style.display="block"}}function ep(){G.onmousemove=null;if(dG(e7)){e7.onresize=null}}var em=function(fU,fX){if(!fU||!fX){u("LeadHunter: skip phone mask render due to empty input or mask");return}u("LeadHunter: render phone mask "+fX+" for input: "+fU.value);if(b6.roistatRenderPhoneMaskMutex){return}b6.roistatRenderPhoneMaskMutex=true;var fR="_",fQ="x",fT="",fS=fX.toLowerCase().split(fQ).join(fR).split(fT).join(fR);var fP=function(fY){if(fU.setSelectionRange){fU.setSelectionRange(fY,fY)}else{if(fU.createTextRange){var fZ=fU.createTextRange();fZ.collapse(true);fZ.moveEnd("character",fY);fZ.moveStart("character",fY);fZ.select()}}};var fV=function(fY){if(!fY){return 0}var fZ=fY.indexOf(fR);if(fZ<0){return fY.length}return fZ};var fW=function(fY){fP(fV(fY))};var fO=function(f7){var f8=fS.split("");if(!f7){return fS}var fY=f7.split("");var f9=[],f6,f3,f5,f2,f0,fZ,f4;for(var f1=0;f1<f8.length;f1++){f3=f8[f1];if(f1>=fY.length){f9.push(f3);continue}f0=((f1+1)<f8.length)?f8[f1+1]:null;fZ=((f1+1)<fY.length)?fY[f1+1]:null;f4=((f1+2)<fY.length)?fY[f1+2]:null;f6=fY[f1];f5=parseInt(f6)>=0;f2=(f3===fR)&&f5;if(!f2){f9.push(f3);continue}if(fZ===fR&&f0!==fR&&f4!==f0){f9.push(f3);continue}f9.push(f6)}return f9.join("")};setTimeout(function(){var fY=fO(fU.value);if(fU.value!==fY){fU.value=fY}fW(fY);b6.roistatRenderPhoneMaskMutex=false},1)};var fg=function(fO,fQ,fP){b3.set(bO,ca.encode(fO));b3.set(bm,ca.encode(fQ));b3.setObject(bN,fP)};var eV=function(fO){ab=fO;if(fi===bw){return}dI()};var dI=function(){var fO={language:ab,message:fe};fi.contentWindow.postMessage(fO,eo)};var eY=function(){u("ShowLimit: Start set roistat_leadHunterScriptsCaught");var fO=d3(eh);if(!fO){fO={}}u("ShowLimit: Cookie roistat_leadHunterScriptsCaught for lhScriptId set to 1");fO[fr]=1;ff(eh,fO)};var dL=function(){u("ShowLimit: Start set roistat_leadHunterScriptsShownCount");var fP=d3(fL);if(!fP){fP={}}var fQ=fP.hasOwnProperty(fr);if(!fQ){u("ShowLimit: Cookie roistat_leadHunterScriptsShownCount for lhScriptId initialized");fP[fr]=0}var fO=fP[fr]+1>el;if(fO){u("ShowLimit: Stored lhScriptId has reached lhScriptMaxShownCount, show counter in cookie not rise up, return from function");return}u("ShowLimit: Cookie already has, exist lhScriptId show counter rise up");fP[fr]+=1;ff(fL,fP)};var ff=function(fO,fP){c4(fO,JSON.stringify(fP),cE)};var d3=function(fO){var fP=j(fO);if(typeof fP!=="undefined"){return JSON.parse(fP)}return fP};var ea=function(){if(el===0){u("ShowLimit: show limit off and set to 0");return false}var fO=d3(fL),fP=fO?fO[fr]:null,fQ=fP+1>el;u("ShowLimit: Check isCurrentScriptMaxShownCountReached, show limit on, check for exceeding the limit, is "+fQ);return fQ};var e5=function(){var fQ=d3(eh),fO=fQ?fQ[fr]:null,fP=fO===1;u("ShowLimit: Check isCurrentLeadHunterScriptSubmitted, is "+fP);return fP};var dU=function(){b3.set(aO,dO());b3.set(bO,ca.encode(e1()));b3.set(ew,d4())};var e1=function(){var fO=a2()+"//"+w+"/api/site/1.0/"+aX()+"/leadhunter/script/"+b3.get(aO)+"/widget";return'<div class="roistat-lh-popup-wrapper" data-is-iframe="1"><iframe id="roistat-lh-popup-iframe" class="roistat-lh-popup-iframe" src="'+fO+'" frameborder="0"></iframe></div>'};var dO=function(){var fP=b3.getObject(q);if(fP===null){return}b3.set(T,"");var fT=Number(b3.get(bx));var fX=Object.keys(fP);var fU=fX.sort()[0];if(!fT){return fU}for(var fS=0;fS<fX.length;fS++){var fY=fP[fX[fS]];var fV=fY.targetPageList;var fR=bz(fV.join(","));var fQ=fV.length===0;var fO=Array.isArray(fY.devicesFilter)&&fY.devicesFilter.length>0?fY.devicesFilter.indexOf(D())!==-1:true;var fW=(fQ||fR)&&fO&&(!fY.timetable.isEnabled||K(fY.timetable));if(fW){fU=fX[fS];b3.set(T,fU)}}return fU};var d4=function(){var fO=b3.get(aO);var fP=JSON.parse(b3.get(q));return fP[fO]?fP[fO].targetPageList.join(","):""};cm(eW);b6.roistatLeadHunterShow=eB;b6.roistatRenderPhoneMask=em;b6.roistat.leadHunter.localization.translateToRussian=function(){eV(bL)};b6.roistat.leadHunter.localization.translateToEnglish=function(){eV(c9)}},multiwidget:function(){var ej="roistat-multiwidget-hidden",er="roistat-multiwidget-pulsator-phone",ep="roistat-multiwidget-pulsator-popup-item-lead-hunter",dX="roistat-multiwidget-pulsator-fill",et="roistat-multiwidget-pulsator-fill-svg",ea="roistat-multiwidget-pulsator-img-icon",dW="roistat-multiwidget-pulsator-popup-item-chat",dK="roistat-multiwidget-pulsator-popup-item-facebook",dO="roistat-multiwidget-pulsator-popup-item-vk",d9="roistat-multiwidget-pulsator-popup-item-telegram",ee="roistat-multiwidget-pulsator-items-popup-holder",d8="iframe_chat_successfully_loaded",dQ="roistat-multiwidget-pulsator-popup-tail";ONLINE_CHAT_CLASS="roistat-online-chat-popup-wrapper",IFRAME_HOLDER_HIDDEN_CLASS="roistat-online-chat-popup-wrapper-hidden";var dV,ed,d2,eq,dH,dM,es,d6,dS,dJ,dT,dL;var d0=false;var eo={topLeft:{bottom:"unset",right:"unset",top:de()?0:"20px",left:de()?0:"35px",},topRight:{bottom:"unset",right:de()?0:"35px",top:de()?0:"20px",left:"unset"},bottomRight:{bottom:de()?0:"20px",right:de()?0:"35px",top:"unset",left:"unset"},bottomLeft:{bottom:de()?0:"20px",right:"unset",top:"unset",left:de()?0:"35px",}};
var dP={topLeft:{bottom:"unset",right:"unset",top:"110px",left:"0"},topRight:{bottom:"unset",right:"0",top:"110px",left:"unset"},bottomRight:{bottom:"110px",right:"0",top:"unset",left:"unset"},bottomLeft:{bottom:"110px",right:"unset",top:"unset",left:"0"}};var d1={topLeft:{"border-top-color":"white","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"white",bottom:"unset",right:"unset",top:"-14px",left:"40px"},topRight:{"border-top-color":"white","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"white",bottom:"unset",right:"34px",top:"-14px",left:"unset"},bottomRight:{"border-top-color":"transparent","border-right-color":"white","border-bottom-color":"white","border-left-color":"transparent",bottom:"-14px",right:"40px",top:"unset",left:"unset"},bottomLeft:{"border-top-color":"transparent","border-right-color":"white","border-bottom-color":"white","border-left-color":"transparent",bottom:"-14px",right:"unset",top:"unset",left:"34px"}};function ei(ev){u("Multiwidget: "+ev)}function d7(){ed=dz(dV,er);d2=dz(dV,ee);eq=dz(dV,dQ);d6=dz(d2,ep);dS=dz(d2,dW);dJ=dz(d2,dO);dT=dz(d2,dK);dL=dz(d2,d9);dH=dz(ed,dX);dM=ed.getElementsByClassName(et);es=dz(ed,ea)}function dY(){if(dG(d2)){d2.classList.toggle(ej)}}function en(ev){if(dG(ev)){ev.classList.toggle("opened")}}function eu(){ei("add pulsator events");dF(ed,"click",function(){if(!d4()){dY()}en(ed)});dF(d6,"click",function(){ei("opening leadhunter via multiwidget");b6.roistatLeadHunterShow();dY();dp(ed,"opened",false)});dF(dS,"click",function(){ei("opening online chat via multiwidget");b6.roistatOnlineChatShow();dY()});dF(dJ,"click",function(){b6.open(b3.get(cz),"_blank")});dF(dT,"click",function(){b6.open(b3.get(cT),"_blank")});dF(dL,"click",function(){b6.open(b3.get(bh),"_blank")})}function d4(){var ev=dz(G,ONLINE_CHAT_CLASS);return dG(ev)&&!ev.classList.contains(IFRAME_HOLDER_HIDDEN_CLASS)}function d5(){return dG(ee)&&!ee.classList.contains(ej)}function dN(ev){if(dG(ev)){ev.classList.add(ej)}}function eg(ev){if(dG(ev)){ev.classList.remove(ej)}}function eb(){dN(d6)}function d3(){ei("hiding disabled multiwidget options");var ev=Number(b3.get(bx)),ew=Number(b3.get(bQ)),ex=Number(b3.get(O)),ey=Number(b3.get(co));if(!ev||!dn||!di){ei("hiding leadhunter option");eb()}if(!ds()||!d0){ei("hiding online chat option");dN(dS)}if(!ew){ei("hiding vk-messenger option");dN(dJ)}if(!ex){ei("hiding fb-messenger option");dN(dT)}if(!ey){ei("hiding telegram-messenger option");dN(dL)}}function dI(){var ew=b3.getObject(f);ei("start filling pulsator");if(ew){if(dG(dH)){dH.setAttribute("style","background: "+ew.button_color+";")}if(dG(es)){es.setAttribute("style","fill: "+ew.icon_color+";")}if(HTMLCollection.prototype.isPrototypeOf(dM)){for(var ev=0;ev<dM.length;ev++){dM[ev].setAttribute("style","fill: "+ew.button_color+";")}}}}function ef(){var ev=b3.getObject(f);return typeof ev.position==="string"&&ev.position!==""?ev.position:"bottomRight"}function ec(){if(dG(dV)){var ev=ef();dV.setAttribute("style","top: "+eo[ev].top+";right:"+eo[ev].right+";bottom:"+eo[ev].bottom+";left:"+eo[ev].left+";")}}function dZ(){if(dG(ed)){var ev=ef();var ew=ev==="topLeft"||ev==="bottomLeft"?"margin-right":"margin-left";ed.setAttribute("style",ew+": auto")}}function eh(){if(dG(d2)){var ev=ef();d2.setAttribute("style","top: "+dP[ev].top+";right:"+dP[ev].right+";bottom:"+dP[ev].bottom+";left:"+dP[ev].left+";")}}function dR(){if(dG(eq)){var ev=ef();eq.setAttribute("style","top: "+d1[ev].top+";right:"+d1[ev].right+";bottom:"+d1[ev].bottom+";left:"+d1[ev].left+";border-top-color:"+d1[ev]["border-top-color"]+";border-right-color:"+d1[ev]["border-right-color"]+";border-bottom-color:"+d1[ev]["border-bottom-color"]+";border-left-color:"+d1[ev]["border-left-color"]+";")}}function el(){ec();dZ();eh();dR()}function dU(){var ew=ca.decode(b3.get(cN));if(ew){ei("appending multiwidget pulsator");var ev=G.createElement("div");ev.innerHTML=ew;dV=ev.childNodes.item(0);G.body.appendChild(dV);d7();d3();dI();el();eu()}}function ek(){ac(b6,"message",function ev(ex){var ew=typeof ex.data==="string"?ex.data:ex.data.message;if(ew===d8){d0=true;eg(dS)}})}function em(){ek();ei("activated");dU()}dt=eb;cm(em)},onlineChat:function(){var eA="iframe-module-created",dR="iframe_chat_successfully_loaded",dJ="iframe-online-chat-opened",dO="iframe-online-chat-invite-message",eC="roistat-online-chat-init",eZ="roistat-online-chat-reload",eL="roistat-online-chat-update-custom-params",d4="roistat-online-chat-lead_successfully_sent",eG="roistat-online-chat-translate-form",ec="roistat-online-chat-send-lead",eO="roistat_chat_id",eY="roistat_chat_session",eB="roistat_chat_custom_position",dY,dS,eP,dT,eM,eu,d6,et;var ep="roistat-online-chat-popup-iframe",d9="roistat-online-chat-hidden",eQ="roistat-online-chat-holder",eK="roistat-online-chat-popup-wrapper",eI="roistat-multiwidget-pulsator-phone",dK="roistat-multiwidget-pulsator-popup-item-chat",es="roistat-online-chat-popup-wrapper-hidden",d7="roistat-online-chat-popup-mouse-track",eo="roistat-online-chat-popup-mouse-track-active",eb="roistat-online-chat-pulsator-fill",eN="roistat-online-chat-pulsator-img",ei="roistat-online-chat-pulsator-phone",d2="roistat-online-chat-pulsator-fill-svg",dX=".roistat-multiwidget-pulsator-items-popup",dV=".roistat-online-chat-pulsator-phone",em=".roistat-online-chat-popup-wrapper";
var d8=false,ea=false,ew=0,dM=0;var eq=dw()?".roistat-multiwidget-pulsator-holder":".roistat-online-chat-holder";var eT;var eX={topLeft:{bottom:"unset",right:"unset",top:de()?0:"20px",left:de()?0:"35px",},topRight:{bottom:"unset",right:de()?0:"35px",top:de()?0:"20px",left:"unset"},bottomRight:{bottom:de()?0:"20px",right:de()?0:"35px",top:"unset",left:"unset"},bottomLeft:{bottom:de()?0:"20px",right:"unset",top:"unset",left:de()?0:"35px",}};var er={topLeft:{top:de()?"90px":"130px",right:"unset",bottom:"unset",left:de()?"3%":"65px"},topRight:{top:de()?"90px":"130px",right:de()?"3%":"65px",bottom:"unset",left:"unset"},bottomRight:{top:"unset",right:de()?"3%":"65px",bottom:de()?"90px":"130px",left:"unset"},bottomLeft:{top:"unset",right:"unset",bottom:de()?"90px":"130px",left:de()?"3%":"65px"}};var eR={topLeft:{top:"unset",bottom:"0",height:"20px"},topRight:{top:"unset",bottom:"0",height:"20px"},bottomLeft:{top:"0",bottom:"unset",height:"50px"},bottomRight:{top:"0",bottom:"unset",height:"50px"}};var ez=function(e1){u("onlineChat: "+e1)};var d3=function(){function e1(){return Math.random().toString(36).substr(2,8)}return e1()+e1()+e1()+e1()};var dU=function(){var e1=b3.get(eY);if(!e1){e1=d3();b3.set(eY,e1)}return e1};var dL=function(){var e1={message:eA,detail:{version:S,language:r,projectKey:aX(),visitId:cn(),firstVisit:b3.get(aQ),chatId:j(eO),moduleTargetOrigin:b6.location.origin,referrer:b6.location.href,params:dB,sessionUniqueKey:dU()}};eM.contentWindow.postMessage(e1,eM.src)};var dZ=function(){var e1={message:dJ,detail:{isOpened:eS()}};eM.contentWindow.postMessage(e1,eM.src)};var d1=function(){var e1={message:eL,detail:{params:dB}};eM.contentWindow.postMessage(e1,eM.src)};var dH=function(){var e1={language:r,message:eG};eM.contentWindow.postMessage(e1,eM.src)};var eH=function(){ac(b6,"message",function e1(e4){var e3=typeof e4.data==="string"?e4.data:e4.data.message;var e2=typeof e4.data!=="string"?e4.data.detail:{};ez("event: "+e3+" "+JSON.stringify(e2));switch(e3){case dR:eJ();break;case eA:dL();break;case eC:ez("saving chat id = "+e2.chatId);c4(eO,e2.chatId,{path:"/"});break;case dO:ez("rendering invite message");eD(e2.message);break;case ec:ez("sending lead");d0(e2.leadData)}})};var ed=function(){var e2=b6.roistat.onlineChat.notificationsCustomHolderSelector;var e1=e2!==null;return G.querySelector(e1?e2:eq)};var d0=function(e1){b6.roistatGoal.reach(e1,function(){eM.contentWindow.postMessage(d4,eM.src)})};var eD=function(e8){if(eS()){return}var e3="<div class='roistat-online-chat-message'><img src='"+e8.operator.avatar+"' class='roistat-online-chat-message-avatar'></img><div class='roistat-online-chat-message-content'><div class='roistat-online-chat-message-name'><span class='roistat-online-chat-message-name-text'>"+e8.operator.name+"</span><div class='roistat-online-chat-message-name-online-status'></div></div><div class='roistat-online-chat-message-text'>"+e8.text+"</div></div><div class='roistat-online-chat-message-close'></div></div>";var e7=G.createElement("div");e7.innerHTML=e3;var e6=ed();if(dG(e6)){var e9=ev()?"beforeend":"afterbegin";e6.insertAdjacentHTML(e9,e3);var e5=e6.getElementsByClassName("roistat-online-chat-message-close");var e1=e6.getElementsByClassName("roistat-online-chat-message");var e4=e5[ev()?e5.length-1:0];var e2=e1[ev()?e5.length-1:0]}setTimeout(function(){e2.remove()},15000);dF(e2,"click",function(fa){fa.stopPropagation();if(!eS()){eF()}eU()});dF(e4,"click",function(fa){fa.stopPropagation();e2.remove()})};var eU=function(){var e2=ed();if(dG(e2)){var e1=e2.getElementsByClassName("roistat-online-chat-message");while(e1.length>0){e1[0].remove()}}};var eW=function(){eM=G.getElementById(ep);if(dG(eM)){dF(eM,"load",function(){en()})}dF(G,"click",function(e6){var e5=b6.roistat.onlineChat.customTriggerSelector;if(dw()){var e7=dz(G,eI);var e4=dz(G,dK);var e3=eS()&&e6.target!==e4&&!e4.contains(e6.target);if(e3){dp(e7,"opened",false)}}else{var e1=dz(G,eQ);var e2=eS()&&e6.target!==e1&&!e1.contains(e6.target);if(e2){dp(e1,"opened",false)}}if(eS()&&(e6.target.closest(dX)===null&&e6.target.closest(em)===null&&e6.target.closest(dV)===null&&(e5?e6.target.closest(e5)===null:true))){eF()}})};var dI=function(e3){var e2=eP.getBoundingClientRect().x;var e1=eP.getBoundingClientRect().y;ea=true;dN();ew=e3.pageX-e2;if(ev()){dM=e3.pageY+e1}else{dM=e3.pageY-e1}};var eh=function(){ea=false;eE();d5()};var dN=function(){if(dG(dS)){dS.classList.add(eo)}};var eE=function(){if(dG(dS)){dS.classList.remove(eo)}};var ex=function(e9){if(ea&&dG(eP)){var e1=eP.getBoundingClientRect();var e8=e1.width;var e7=400;var e2=50;var fc=0;var e4=b6.innerHeight-e7;var fa=e9.pageX-ew;var e6=e2;var e3=b6.innerWidth-e2-e8;if(ev()){fc=b6.innerHeight-(e9.pageY+e1.y)-20}else{fc=e9.pageY-dM}var fb=eV();var e5=fb==="bottomLeft"||fb==="bottomRight"?"top":"bottom";if(fa>=e6&&fa<=e3){eP.style.left=fa+"px";if(!e0()){eP.style.right="unset"}}if(fc>=50&&fc<=e4){eP.style[e5]=fc+"px"}}};var d5=function(){var e1={position:eV(),top:eP.style.top,left:eP.style.left,bottom:eP.style.bottom,right:eP.style.right};
b3.setObject(eB,e1)};var eV=function(){var e1=b3.getObject(f);var e2=typeof e1.position==="string"&&e1.position!=="";return e2?e1.position:"bottomRight"};var ev=function(){var e1=eV();return e1==="topLeft"||e1==="topRight"};var e0=function(){var e1=eV();return e1==="topLeft"||e1==="bottomLeft"};var dQ=function(){var e1=eV();var e4=b6.roistat.onlineChat.customPosition;var e2=e4&&e4.top!==null?e4.top:er[e1].top;var e5=e4&&e4.right!==null?e4.right:er[e1].right;var e6=e4&&e4.bottom!==null?e4.bottom:er[e1].bottom;var e3=e4&&e4.left!==null?e4.left:er[e1].left;eP=Z()?dz(dY,eQ):dz(dY,eK);if(dG(eP)){eP.classList.toggle(es);eP.setAttribute("style","top: "+e2+";right:"+e5+";bottom:"+e6+";left:"+e3+";")}};var eg=function(){if(dG(dS)){var e1=eV();dS.setAttribute("style","top: "+eR[e1].top+";bottom:"+eR[e1].bottom+";height:"+eR[e1].height+";")}};var ee=function(){if(dG(eT)){var e1=eV();eT.setAttribute("style","top: "+eX[e1].top+";right:"+eX[e1].right+";bottom:"+eX[e1].bottom+";left:"+eX[e1].left+";")}};var ek=function(){ez("iframe appending to page");var e1=ca.decode(b3.get(B));dY=G.createElement("div");dY.innerHTML=e1;G.body.appendChild(dY);dS=dz(G,d7);dQ();eW()};var el=function(){var e2=b3.getObject(f);ez("start filling pulsator");if(e2){if(dG(eu)){eu.setAttribute("style","background: "+e2.button_color+";")}if(dG(d6)){d6.setAttribute("style","fill: "+e2.icon_color+";")}if(HTMLCollection.prototype.isPrototypeOf(et)){for(var e1=0;e1<et.length;e1++){et[e1].setAttribute("style","fill: "+e2.button_color+";")}}}};var eJ=function(){var e2=ca.decode(b3.get(bi));var e4=!cv()&&b6.roistatOnlineChatOnly;var e3=(e2&&!dw()&&ds())||e4;if(e3){ez("pulsator appending to page");var e1=G.createElement("div");e1.innerHTML=e2;eT=e1.childNodes.item(0);eu=dz(eT,eb);d6=dz(eT,eN);dT=dz(eT,ei);et=G.getElementsByClassName(d2);G.body.appendChild(eT);ee();dW();el()}};var dW=function(){if(dG(eT)){dF(eT,"click",function(){eF();dP(eT)})}};function dP(e1){if(dG(e1)){e1.classList.toggle("opened")}}var eS=function(){return dG(eP)&&!eP.classList.contains(es)};var eF=function(){setTimeout(function(){ea=false},3000);if(dG(eP)){eP.classList.toggle(es)}if(eS()){eU()}dZ()};var ej=function(e1){r=e1;if(!dG(eM)){return}dH()};var en=function(){d8=true;b6.roistatOnlineChatShow=eF;ez("chat window initialized")};function ef(e1){dj(e1);d1()}function ey(){ek();eH()}b6.setRoistatOnlineChatCustomParams=ef;b6.roistat.onlineChat.localization.translateToRussian=function(){ej(bL)};b6.roistat.onlineChat.localization.translateToEnglish=function(){ej(c9)};cm(ey)}};function dy(dH){u("Widgets: "+dH)}function e(dH){return dH!==dE}function dj(dJ){var dI=Object.keys(dJ);for(var dH=0;dH<dI.length;dH++){dB[dI[dH]]=dJ[dI[dH]]}}function dw(){var dO=Number(b3.get(bx)),dK=dO&&dn&&di,dR=Number(b3.get(a3)),dJ=ds(),dP=Number(b3.get(bQ)),dL=Number(b3.get(O)),dH=Number(b3.get(co)),dQ=dK||dJ||dP||dL||dH,dI=dK&&!dJ&&!dP&&!dL&&!dH,dN=dJ&&!dK&&!dP&&!dL&&!dH,dS=!cv()&&b6.roistatOnlineChatOnly,dM=cv()&&c7();u("Is online chat only: "+dS);u("Is rp: "+dS);return dR&&dQ&&!dN&&!dI&&!dS&&!dM}function ds(){var dH=Number(b3.get(cx));if(!dH){u("OnlineChat: Online chat is disabled");return false}var dI=b3.getObject(A);if(!dI.is_available_for_current_user_agent){u("OnlineChat: Current device group is disabled");return false}if(!dI.pages_filter.is_enabled){u("OnlineChat: Pages filter is disabled");return true}return bz(dI.pages_filter.pages.join(","))}function dt(){dy("Multiwidget disabled. Hide leadhunter pulsator from module")}function dl(dH,dJ,dI){b3.set(bO,ca.encode(dH));b3.set(bm,ca.encode(dJ));b3.setObject(bN,dI)}function dr(dI,dH){b3.set(cN,ca.encode(dI));b3.setObject(f,dH)}function dq(dJ,dH,dI){b3.set(bi,ca.encode(dJ));b3.set(B,ca.encode(dH));b3.set(cx,dI)}function dv(dH,dJ,dI){dl(dH,dJ,dI);b3.set(cN,ca.encode(dE));b3.set(B,ca.encode(dE));dx=false;dC.leadHunter()}function dk(dS,dO,dM){var dJ=dS.form_template,dT=dS.pulsator_template,dL=dS.pulsator_settings;if(c7()){dv(dJ,dT,dL);return}dy("start initing widgets");var dP=dM.pulsator_template,dK=dM.iframe_template,dR=dO.pulsator_template,dH=dO.pulsator_settings,dN=Number(b3.get(bx)),dI=Number(dM.settings.is_enabled),dQ=b3.getObject(q)!==null;dl(dJ,dT,dL);dr(dR,dH);dq(dP,dK,dI);if(dQ){b3.set(bO,ca.encode(dm()))}dx=true;if(dN&&!aE()){dy("leadhunter enabled. Start processing");dC.leadHunter()}if(ds()){dy("online chat enabled. Start processing");dC.onlineChat()}if(dw()){dy("multiwidget enabled. Start processing");dC.multiwidget()}}var dm=function(){var dH=a2()+"//"+w+"/api/site/1.0/"+aX()+"/leadhunter/script/"+b3.get(aO)+"/widget";return'<div class="roistat-lh-popup-wrapper" data-is-iframe="1"><iframe id="roistat-lh-popup-iframe" class="roistat-lh-popup-iframe" src="'+dH+'" frameborder="0"></iframe></div>'};function dD(){var dJ=b3.get(bO),dT=b3.get(bm),dL=b3.getObject(bN),dO=b3.get(bi),dK=b3.get(B),dI=b3.get(cx),dQ=b3.get(cN),dH=b3.getObject(f);b6.roistatLeadhunterForm=dv;b6.roistatMultiwidget=dk;if(!dJ||!dT||!dL||!dQ||!dH||!dO){dy("requesting data from server");
aP(a2()+"//"+w+"/api/site/"+ae+"/"+aX()+"/multiwidget?domain="+encodeURIComponent(G.domain))}else{var dS=ca.decode(dQ);var dP=ca.decode(dK);if((!e(dS)||!e(dP)||c7())&&!aE()){dy("initing LeadHunter form");b6.roistatLeadhunterForm(ca.decode(dJ),ca.decode(dT),dL)}else{dy("initing multiwidget form");var dM={pulsator_template:dS,pulsator_settings:dH},dN={form_template:ca.decode(dJ),pulsator_template:ca.decode(dT),pulsator_settings:dL},dR={iframe_template:dP,pulsator_template:ca.decode(dO),settings:{is_enabled:Number(dI),},};b6.roistatMultiwidget(dN,dM,dR)}}}function du(){dD();dy("Widgets: form initialized")}function dA(){dy("activated");du()}cm(dA);b6.setRoistatOnlineChatCustomParams=dj;b6.roistatSaveLeadHunterTemplates=dl;b6.roistatSaveMultiwidgetTemplate=dr;b6.roistatSaveOnlineChatTemplate=dq})();(function t(){var dv=function(){return j(dc)};var dt=function(){return b3.get(bb)};var dl=function(){return b3.get(bo)};var dz=function(dB){return dB!=null&&dB!==bw&&dB!==""};var dy=function(){var dB=[];var dC=G.getElementsByClassName(am);if(dC&&dC.length){dB=dC}return dB};var dj=function(){var dB=[];var dC=G.getElementsByClassName(F);if(dC&&dC.length){dB=dC}return dB};var di=function(){var dB=[];var dC=G.getElementsByClassName(ag);if(dC&&dC.length){dB=dC}return dB};var dn=function(){var dB=[];var dC=G.getElementsByClassName(I);if(dC&&dC.length){dB=dC}return dB};var dr=function(){var dB=[];var dC=G.getElementsByClassName(c3);if(dC&&dC.length){dB=dC}return dB};var e=function(dO,dC){u("CallTracking: RenderPhone phone = "+dO);var dH=function(dQ){return dQ.split(/[^0-9]/).join("")};var dI=function(dT,dV){var dY=null;if(!dT){return dY}var dQ=dV.split(",");if(dQ.length<2){dY=dV}else{var dR=dT.getAttribute("data-prefix");if(dR){for(var dU=0;dU<dQ.length;dU++){var dW=dQ[dU];var dX=dH(dW);if(dX.indexOf("8")===0){dX="7"+dX.substring(1)}var dS=dX.split(dR)[0]==="";if(dS){dY=dW;break}}}if(dY===null){dY=dQ[0]}u("CallTracking._getPhoneForElement: Prepared phone = "+dY+" for data-prefix = "+dR)}return dY};var dF=function(dU,dS){var dQ=dI(dU,dS);if(!dQ||!dU){return}if(dU.tagName.toLowerCase()!=="a"){return}var dT=dU.getAttribute("href");if(cQ(dT,"tel:")){var dR=dH(dQ);if(dR.indexOf("8")===0){dR="7"+dR.substring(1)}dU.setAttribute("href","tel:+"+dR);dG(dU,dQ)}};var dG=function(dR,dQ){if(!dR.hasAttribute("title")){return}dR.setAttribute("title",dQ)};var dK=function(dS,dR){var dQ=dI(dS,dR);if(!dQ||!dS){return}dS.innerHTML=dQ};var dP=function(dQ){var dR=dy();u("CallTracking: render phone default classes for "+dR.length+" elements");s(dR,function(dS){dK(dS,dQ);dF(dS,dQ)});s(dj(),function(dT){var dS=dH(dI(dT,dQ)).slice(0,1);dK(dT,dS)});s(di(),function(dT){var dU=dI(dT,dQ).match(/\((.*)\)/);if(dU!==null){var dS=dU[1];dK(dT,dS)}});s(dn(),function(dU){var dS=dI(dU,dQ).match(/\)(.*)/);if(dS!==null){var dV=dH(dS[1]);var dT=dV.slice(-1*dV.length,-4)+"-"+dV.slice(-4,-2)+"-"+dV.slice(-2);dK(dU,dT)}});s(dr(),function(dS){dF(dS,dQ)})};var dN=function(dQ,dV){if(!dV){return}u("CallTracking: render phone user replacement for "+dV.length+" replacements");for(var dU=0;dU<dV.length;dU++){var dX=dV[dU];if(!dX){continue}var dS=dX[0];dX=dX.substr(1);var dW=[];if(dS==="#"){var dT=G.getElementById(dX);if(dT!==null){dW.push(dT)}}else{dW=G.getElementsByClassName(dX);dE(dX,dQ)}if(!dW||dW.length<1){continue}u("CallTracking: render phone for "+dX+", "+dW.length+" elements");for(var dR=0;dR<dW.length;dR++){dK(dW[dR],dQ);dF(dW[dR],dQ)}}};var dJ=function(dQ){for(var dR=0;dR<dQ.length;dR++){dN(dQ[dR].phone,dQ[dR].css_selectors);dM(dQ[dR].phone,dQ[dR].replaceable_numbers)}};var dM=function(dS,dR){if(!dR||dR.length===0){return}var dQ=function(){var d3=dW();var d2=G.getElementsByTagName("*");var dX=d2.length;for(var d1=0;d1<dX;d1++){var d4=d2[d1];dT(d4,d3,dI(d4,dS));var d0=d4.childNodes.length;for(var dY=0;dY<d0;dY++){var dZ=d4.childNodes[dY];dV(dZ,d3,dI(dZ,dS))}}};var dT=function(d1,d0,dX){if(!dU(d1)){return}var d2=d1.getAttribute("href").replace("tel:","");var dZ=d0.length;for(var dY=0;dY<dZ;dY++){if(d0[dY].test(d2)){dF(d1,dI(d1,dX))}}};var dU=function(dY){if(dY.tagName.toLowerCase()!=="a"){return false}var dX=dY.getAttribute("href");return aT(dX)&&dX.indexOf("tel:")===0};var dW=function(){var dZ=[];for(var dX=0;dX<dR.length;dX++){var dY="[\\s()[\\]{}\\-+.]*";var d0=dR[dX].split("").join(dY);dZ.push(new RegExp("[+(]?"+d0,"g"))}return dZ};var dV=function(d0,dZ,dX){if(d0.nodeType!==Node.TEXT_NODE){return}for(var dY=0;dY<dZ.length;dY++){if(d0.textContent&&dZ[dY].test(d0.textContent)){d0.textContent=d0.textContent.replace(dZ[dY],dX)}else{if(d0.innerText&&dZ[dY].test(d0.innerText)){d0.innerText=d0.innerText.replace(dZ[dY],dX)}}}};dQ()};var dE=function(dR,dQ){s(dD(dR+"-"+bD),function(dT){var dS=dH(dI(dT,dQ)).slice(0,1);dK(dT,dS)});s(dD(dR+"-"+aJ),function(dT){var dU=dI(dT,dQ).match(/\((.*)\)/);if(dU!==null){var dS=dU[1];dK(dT,dS)}});s(dD(dR+"-"+ba),function(dU){var dS=dI(dU,dQ).match(/\)(.*)/);if(dS!==null){var dV=dH(dS[1]);var dT=dV.slice(-1*dV.length,-4)+"-"+dV.slice(-4,-2)+"-"+dV.slice(-2);
dK(dU,dT)}});s(dD(dR+"-"+bT),function(dS){dF(dS,dQ)})};var dD=function(dR){var dQ=[];var dS=G.getElementsByClassName(dR);if(dS&&dS.length){dQ=dS}return dQ};var dL=function dL(){var dR=dl();if(dR){dR=dR.split("\n");for(var dQ=0;dQ<dR.length;dQ++){dR[dQ]="."+dR[dQ]}}if(dC instanceof Array){dJ(dC)}else{dP(dO);dN(dO,dR)}};(function dB(){dL();var dQ=[300,5000,15000];dQ.forEach(function(dR){setTimeout(dL,dR)})})()};var dk=function(dB){b3.save(n,dB,cE)};var du=function(){if(b6.roistat.callTracking.phone){var dB={expires:parseInt(b6.roistat.callTracking.sessionTime),path:"/"};if(cE.domain){dB.domain=cE.domain}c4(dc,b6.roistat.callTracking.phone,dB);dk(1);b3.save(bo,b6.roistat.callTracking.replacementClasses,cE);b3.save(bb,b6.roistat.callTracking.phoneScriptsJson,cE)}};var ds=function(dB,dF,dD,dC){u("CallTracking: reuse phone "+dB+" for time "+dF+" and replacements "+dD);if(!dz(dB)){u("CallTracking: new phone is invalid");roistat.callTracking.phone=null;cU();return}roistat.callTracking.enabled=1;roistat.callTracking.phone=dB;roistat.callTracking.sessionTime=dF;roistat.callTracking.replacementClasses=dD;roistat.callTracking.phoneScriptsJson=dC;cU();du();var dG={expires:parseInt(dF),path:"/"};if(cE.domain){dG.domain=cE.domain}c4(dc,dB,dG);b3.save(bb,dC,cE);b3.save(bo,dD,cE);var dE=cY(dC);if(dE==null){e(dB)}else{e(dB,dE)}};var dm=function(){u("CallTracking: request new phone");var dB=j(bY);var dF=ai();var dE=dF?dF:bp;var dD=encodeURIComponent(ck);var dC=M()+"/get-phone?visit="+dB+"&marker="+(dE?dE:"")+"&prefix="+cs+"&prefix_bind="+dd+"&phone_scripts_bind="+P+"&page="+dD;aP(dC)};var dp=function(){cs=b6.roistatPhonePrefix?b6.roistatPhonePrefix:"";dd=b6.roistatPhonePrefixBind?b6.roistatPhonePrefixBind:"";P=b6.roistatCalltrackingScripts&&b6.roistatCalltrackingScripts.join?b6.roistatCalltrackingScripts.join(","):"";u("CallTracking: refresh phone with prefix: "+cs+", binding: "+dd+", scripts: "+P);dm()};var dA=function(){var dB=b3.get(n)>0;var dC=bP.callTrackingEnabled;return dB&&dC};var dq=function(dB){dk(dB.is_enabled)};var dx=function dx(){var dB=dv();if(!dz(dB)){u("CallTracking: invalid phone "+dB+", requesting a new one");dm()}else{u("CallTracking: render phone "+dB);var dC=cY(dt());if(dC==null){e(dB)}else{e(dB,dC)}}};var dw=function(){u("CallTracking: init");if(aE()){u("CallTracking: Shut down because only online chat need to be inited");return}du();if(!dA()){u("CallTracking: disabled, skip");return}if(bP.callTrackingManual){u("CallTracking: init finish because off manual");return}dx();ar(dx)};b6.roistatCallTrackingRefresh=dp;b6.roistatRequestNewPhone=dm;b6.roistatReusePhone=ds;b6.roistatCalltrackingUpdateSettings=dq;cm(dw)})();(function C(){var dj=function(dq){u("Emailtracking: "+dq)};var dn=function(dq,ds,dr){b3.save(bn,dq,cE);b3.save(b,ds,cE);b3.save(bA,JSON.stringify(dr),cE)};var di=function(){var dq=(b6.roistat.emailtracking.email&&b6.roistat.emailtracking.trackingEmail)||aK(b6.roistat.emailtracking.emails);if(b6.roistat.emailtracking.loaded&&dq){dj("save loaded email: "+b6.roistat.emailtracking.email);dn(b6.roistat.emailtracking.email,b6.roistat.emailtracking.trackingEmail,b6.roistat.emailtracking.emails)}else{dj("settings save skip, because not loaded");b6.roistat.emailtracking.email=b3.get(bn);b6.roistat.emailtracking.email=b6.roistat.emailtracking.email?b6.roistat.emailtracking.email:null;b6.roistat.emailtracking.email=b6.roistat.emailtracking.email==="null"?null:b6.roistat.emailtracking.email;dj("email loaded from storage: "+b6.roistat.emailtracking.email);b6.roistat.emailtracking.trackingEmail=b3.get(b);b6.roistat.emailtracking.trackingEmail=b6.roistat.emailtracking.trackingEmail?b6.roistat.emailtracking.trackingEmail:null;b6.roistat.emailtracking.trackingEmail=b6.roistat.emailtracking.trackingEmail==="null"?null:b6.roistat.emailtracking.trackingEmail;dj("tracking email loaded from storage: "+b6.roistat.emailtracking.trackingEmail);b6.roistat.emailtracking.emails=cY(b3.get(bA));b6.roistat.emailtracking.emails=b6.roistat.emailtracking.emails?b6.roistat.emailtracking.emails:null;dj("emails loaded from storage: "+JSON.stringify(b6.roistat.emailtracking.emails))}};var dl=function(dq){dn(dq.email,dq.trackingEmail,dq.emails)};var dk=function(){var dq=(!!b6.roistat.emailtracking.email&&!!b6.roistat.emailtracking.trackingEmail)||aK(b6.roistat.emailtracking.emails);return b6.roistat.emailtracking.enabled&&dq};var e=function(){if(!dk()){dj("emailtracking disabled, skip swapping");return}var dr=function(dw,dx,dv){if(dw.href){var du=ay(dw.href);if(dx.test(du)){dw.href=du.replace(dx,dv);return true}}if(dw.nodeType!==3){return false}if(dw.textContent&&dx.test(dw.textContent)){dw.textContent=dw.textContent.replace(dx,dv);return true}else{if(dw.innerText&&dx.test(dw.innerText)){dw.innerText=dw.innerText.replace(dx,dv);return true}}return false};var dq=function(du){return du.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};var ds=function(dw,dv){var du=!dv.match(/[a-z]/);return du?dw.toUpperCase():dw};var dt=function(dC,dE){var dF=dq(dC);
var dw=new RegExp("(^|\\s)(mailto:)?("+dF+")($|\\s|\\?)","gi");var dG=function(dL,dJ,dH,dI,dK){dH=dH||"";return dJ+dH+ds(dE,dI)+dK};dj("starting to replace email "+dC+" to "+dE+" with regexp "+dw);var dv=G.getElementsByTagName("*");var dy=dv.length;dj("found "+dy+" nodes on page");var dB=0;for(var dA=0;dA<dy;dA++){var dx=dv[dA];var dD=dx.childNodes.length;if(dD>0){for(var dz=0;dz<dD;dz++){var du=dx.childNodes[dz];if(dr(du,dw,dG)){dB++}}}if(dr(dx,dw,dG)){dB++}}dj("successfully replaced "+dB+" nodes")};if(b6.roistat.emailtracking.emails){be(b6.roistat.emailtracking.emails,dt)}else{dt(b6.roistat.emailtracking.email,b6.roistat.emailtracking.trackingEmail)}};var dm=function(){dj("process email swap");e();setTimeout(function(){e()},300);setTimeout(function(){e()},5000);setTimeout(function(){e()},15000)};var dp=function(){dj("init");if(aE()){dj("Shut down because only online chat need to be inited");return}ar(dm);di();dm()};b6.roistatEmailtrackingUpdateSettings=dl;b6.roistat.emailtracking.refresh=e;cm(dp)})();(function bg(){var dk=function(dm){u("MultiDomain: "+dm)};var dj=function(){return b3.get(cG)>0};var di=function(dr){var ds=function(du){if(!du){return false}if(cQ(du,"roistat_visit")){return false}var dt=a1(du);var dw=a1(G.domain);var dv=new RegExp(/^((https?:)?\/\/)?([A-Z-0-9\_\-\~]+\.)+[A-Z-0-9\_\-\~]+/i);return dt!==dw&&dv.test(du)};var dq=function(dw){var dx=dw.split("#");var dv=dx[0].split("?");var dt="";var du="";if(dv.length===2){dt=dv[1]}if(dt){du="&"}dt=dt+du+"roistat_visit="+roistat.getVisit();dv[1]=dt;dx[0]=dv.join("?");return dx.join("#")};if(dr.tagName.toLowerCase()!=="a"){return}var dp=dr.getAttribute("href");var dn=false;if(ds(dp)){var dm=dq(dp);dk("update url "+dp+" > "+dm);dr.setAttribute("href",dm);dn=true}return dn};var e=function(){if(!dj()){dk("disabled, skip");return}var dm=G.getElementsByTagName("a");var dn=dm.length;dk("found "+dn+" <a> nodes on page");var dr=0;for(var dp=0;dp<dn;dp++){var dq=dm[dp];if(di(dq)){dr++}}dk("replaced "+dr+" nodes")};var dl=function(){dk("init");if(aE()){dk("Shut down because only online chat need to be inited");return}e();setTimeout(function(){e()},300);setTimeout(function(){e()},5000);setTimeout(function(){e()},15000)};cm(dl)})();(function cP(){var e=60*1000;var dp=2*60*1000;var di=function(dr){u("SettingsUpdater: "+dr)};var dm=function(){b3.set(W,b8())};var dn=function(){var ds=cV();var dr=!(ds>0);di("is first update check: lastUpdateTime="+ds+", result="+(dr?1:0));return dr};var dq=function(){var dt=b8()-dp;var ds=cV();var dr=ds<=dt;di("expiration check: _minTime="+dt+", lastUpdateTime="+ds+", result="+(dr?1:0));return dr};var dj=function(ds){var dr=j(bY);a(dr,ds)};var dk=function(ds){di("update settings and save last update time");var dr=b3.getObject(q)!==null;if(dr){b3.set(q,ds.js_settings.leadHunterTargetPagesMap)}b6.roistatCalltrackingUpdateSettings(ds.calltracking);b6.roistatEmailtrackingUpdateSettings(ds.emailtracking);b6.roistatSaveLeadHunterTemplates(ds.leadhunter_templates.form_template,ds.leadhunter_templates.pulsator_template,ds.leadhunter_templates.pulsator_settings);b6.roistatSaveMultiwidgetTemplate(ds.multiwidget_templates.pulsator_template,ds.multiwidget.pulsator_settings);b6.roistatSaveOnlineChatTemplate(ds.online_chat_templates.pulsator_template,ds.online_chat_templates.iframe_template);b6.roistatSaveProxyFormSettings(ds.proxy_forms);a4(ds.js_settings);cF(ds.multiwidget.multiwidget_settings);b7(ds.online_chat);v(ds.geo);b0.isSettingsUpdating=false;dm()};var dl=function(){di("init");if(dn()){di("in first update we just start first timer and skip");dm();return}if(!dq()){di("update is not not expired, skip");return}di("start to update settings");dj()};cm(function(){b6.roistatUpdateSettings=dk;setTimeout(function(){dl()},3000);di("set interval to update settings");setInterval(function(){dl()},e)})})();(function bI(dl,e,dn){var dk={};var di=function(dq){var dp=encodeURIComponent?encodeURIComponent:encodeURI;return dp(dq)};var dj=function(dw,dq){u("Reach goal start");if(!dw){dw={}}var dt={leadName:"",formTitle:"",name:"",phone:"",email:"",price:"",text:"",fields:"",client_fields:"",is_need_callback:"",callback_phone:"",visit:cn(),is_skip_sending:0,items:"",placeholders_data:"",engine_type:""};for(var ds in dt){if(!Object.prototype.hasOwnProperty.call(dt,ds)){continue}if(!Object.prototype.hasOwnProperty.call(dw,ds)){continue}if(!dw[ds]){continue}if(ds==="fields"||ds==="client_fields"||ds==="items"||ds==="placeholders_data"){dw[ds]=JSON.stringify(dw[ds])}dt[ds]=di(dw[ds])}var dv=aX();var du=a2()+"//"+w+"/api/site/"+ae+"/"+dv+"/reach-goal?v=2";for(var dr in dt){if(!Object.prototype.hasOwnProperty.call(dt,dr)){continue}du=du+"&"+dr+"="+dt[dr]}if(dq!==dn){var dp=Math.random().toString();dk[dp]=dq;du+="&callback_key="+dp}aP(du);u("Reach goal completed")};var dm=dl.roistatGoal={reach:function(dq,dp){dj(dq,dp)},callAfterReachCallback:function(dp){if(Object.prototype.hasOwnProperty.call(dk,dp)){dk[dp]();delete dk[dp]}}}})(b6,G,bw);(function c6(dj,e,dk){var di=function(dq){if(dq instanceof Array||dq===null||typeof dq!=="object"){u("Invalid event data");
return""}var dm=[];for(var dp in dq){if(Object.prototype.hasOwnProperty.call(dq,dp)){var dn=dq[dp];if(typeof dn==="string"||typeof dn==="number"){dm.push("data["+encodeURIComponent(dp)+"]="+encodeURIComponent(dn))}else{u("Event data property ignored: "+dp)}}}return dm.length>0?"&"+dm.join("&"):""};var dl=function(dp,dq){u("Send event start");var dm=o();var dn=M()+"/event/register?visit="+dm+"&event="+dp+di(dq);aP(dn);u("Send event completed")};dj.roistat.event={send:function(dm,dn){dl(dm,dn)}}})(b6,G,bw);(function b4(ds,du,dk){if(aE()){u("VisitApprove: Shut down because only online chat need to be inited");return}var dv=ds.roistatIsInitVisit===true?20000:10000;var dj=(new Date()).getTime();var di=function(dz){return"approve_visit_"+dz};var dr=function(dz){bV.set(di(dz),1)};var dw=function(dz){return bV.get(di(dz))>0};var e,dm,dy=[];if(du.addEventListener){e=function(dA,dz,dB){return dA.addEventListener(dz,dB,false)};dm=function(dA,dz,dB){return dA.removeEventListener(dz,dB,false)}}else{e=function(dA,dz,dB){return dA.attachEvent("on"+dz,dB)};dm=function(dA,dz,dB){return dA.detachEvent("on"+dz,dB)}}var dq=function(dC){if(dy.length>30){return}dC=dC||ds.event;if(!dC||!dC.screenX){return}var dB=(new Date()).getTime();var dE,dD=null;if(dy.length>0){dD=dy[dy.length-1]}if(dD){dE=dB-dD.time}else{dE=dB-dj}if(dE<300){return}dE=dE-300;var dG=0;var dz=dC.screenX;var dF=dC.screenY;if(dD){dG=parseInt(Math.sqrt(Math.pow(dD.y-dF,2)+Math.pow(dD.x-dz,2)))}var dA={time:dB,pauseBeforeMove:dE,x:dz,y:dF,distance:dG};dy.push(dA)};var dp=function(){var dz=[];s(dy,function(dA){var dB=[dA.pauseBeforeMove,dA.distance];dz.push(dB.join(":"))});if(dz.length===0){dz.push("0:0")}return dz.join("|")};var dl=function(){for(var dz in ds){if(cQ(dz,"yaCounter")){return true}}return false};var dt=function(){dm(du,"mousemove",dq);var dz=o();u("VisitApprove: start for visit "+dz);if(dw(dz)){u("VisitApprove: visit already approved, skip");return}dr(dz);av();var dA=M()+"/approve?v="+S+"&visit="+dz;if(dx()){dA+="&hash="+an()}if(dn()){dA+="&page_params="+encodeURIComponent(JSON.stringify(ds.roistat.page.params));g()}dA+="&mv="+dp();dA+="&pl="+(ds.navigator?ds.navigator.platform:"");dA+="&ym="+(dl()?"1":"0");aP(dA)};var dx=function(){var dD=b0.cookies,dC=m();var dF=a7();for(var dA=0;dA<dF.length;dA++){var dE=dF[dA];var dG=Object.prototype.hasOwnProperty.call(dD,dE)?dD[dE]:dk;var dz=Object.prototype.hasOwnProperty.call(dC,dE)?dC[dE]:dk;var dB=typeof dz==="string"&&dz.length>0;if(dB&&dG!==dz){return true}}return false};var dn=function(){var dE=b0.pageParams,dB=ds.roistat.page.params;for(var dA=0;dA<ct.length;dA++){var dz=ct[dA];var dC=Object.prototype.hasOwnProperty.call(dE,dz)?dE[dz]:null;var dD=Object.prototype.hasOwnProperty.call(dB,dz)?dB[dz]:null;if(dD!==dC){return true}}return false};setTimeout(function(){dt()},dv);e(du,"mousemove",dq)})(b6,G,bw);(function at(dm,dn,di){var dk=function(){return V("roistat_ab_demo")==="1"};var dp=function(ds){return new RegExp(ds.split(".").join("\\.").split("*").join(".*").split("?").join("."))};var dl=function(dx){var ds=dm.location.href,dv=dx.filter,dB=dx.filterValue;var dy;switch(dv){case"except":case"pages":var dt,dA,dz=false;dA=ds?aG(ds):"";dy=dB?dB.split("\n"):[];if(dA&&dy.length!==0){for(var du=0;du<dy.length;du++){var dw=dy[du].trim();if(dw.length===0){continue}dt=dp(dw);if(dt.test(dA)){dz=true;break}}}return(dv==="pages")?dz:!dz;break;case"all":default:return true}};var e=function(du){var ds=dn.getElementsByTagName("head")[0],dt;dt=dn.createElement("style");dt.setAttribute("type","text/css");if(dt.styleSheet){dt.styleSheet.cssText=du.value}else{dt.innerText=du.value}ds.appendChild(dt)};var dj=function(ds){if(dl(ds)){switch(ds.type){case"css":e(ds);break}}};dm.applyTests=function(){var ds=b3.getObject("abTesting");var du,dt;for(du in ds){if(!Object.prototype.hasOwnProperty.call(ds,du)){continue}dt=ds[du];dj(dt)}};var dq=function(){u("Call: apply demo AB test");var ds=V("roistat_ab_data");var dt;if(ds===null){return}else{dt=JSON.parse(ca.decode(ds))}if(typeof dt!=="object"){u("Error: testValue is not an object.");return}dj(dt)};function dr(){if(aE()){u("ABTest: Shut down because only online chat need to be inited");return}var ds=dk();if(!cL&&!ds){applyTests()}if(ds){dq()}}dr()})(b6,G,bw);(function a5(di,e,dj){if(aE()){u("visitStreamNew: Shut down because only online chat need to be inited");return}if(!cO){return}setTimeout(function(){(function(dr,dq,du,dt,dn,dl,dp){dr[dn]={COUNTER_ID:dl,HOST:dp};var dm=dq.location.protocol=="https:"?"https://":"http://";var dk=dq.createElement(du);dk.async=1;dk.src=dm+dp+dt;var ds=dq.getElementsByTagName(du)[0];ds.parentNode.insertBefore(dk,ds)})(di,e,"script","/counter.js","datamap",aX(),cO)},1000)})(b6,G,bw);(function b2(dj,e,dk){var dl=function(){var dm=dj.roistatMetrikaCounterId;if(dm){b3.set(aR,dm)}};var di=function(ds){var dm="yaCounter"+ds;var dr=100,dp=0,dq=60000;var dn=function(){dp+=dr;u("YandexMetrika: trying to access counter "+ds);if(dj[dm]===dk){if(dp<dq){setTimeout(dn,dr);
dr*=2}return}var dt={};dt[cB]=o();dj[dm].params(dt);u("YandexMetrika: visit id "+dt[cB]+" sent to counter "+ds)};setTimeout(dn,dr)};cm(function(){dl();var dp=b3.get(aR);if(!dp){u("YandexMetrika: counter id not found");return}var dn=String(dp).split(",");u("YandexMetrika: counters: "+dn);for(var dm=0;dm<dn.length;dm++){if(dn[dm].trim()===""){continue}di(dn[dm])}})})(b6,G,bw);(function ao(ds,dw){var dA=function(dD){u("Proxy Forms: "+dD)};var dp=function(){if(ds.roistat.proxyForms.loaded&&ds.roistat.proxyForms.settings.length>0){dA("save loaded settings");dx(ds.roistat.proxyForms.settings)}else{dA("settings not loaded, getting from storage");ds.roistat.proxyForms.settings=b3.getObject(c5)||[]}};var dx=function(dD){b3.setObject(c5,dD)};var dt=function(){dA("init form listener");dk(ds.roistat.proxyForms.settings);e(ds.roistat.proxyForms.settings)};var dC=function(dD){return dD.hasOwnProperty("hosts")&&dD.hasOwnProperty("is_excluding_hosts")&&bl(dD.hosts)&&dD.hosts.length>0};var dm=function(dE){if(!dC(dE)){return true}var dF=cW(dE.hosts,a1(ds.location.host));var dD=Boolean(dE.is_excluding_hosts);return dD?!dF:dF};var dj=function(dE){var dD=[];s(dE,function(dF){if(dm(dF)){dD.push(dF)}});return dD};var e=function(dD){var dF=[];s(dD,function(dG){if(dG.type==="js-button"){dF.push(dG)}});if(dF.length<1){dA("no button settings");return}var dE;if(dw.addEventListener){dE=function(dG){dn(dF,dG,dG.target,dl)};dw.addEventListener("click",dE,true)}else{if(dw.attachEvent){dE=function(){var dG=ds.event;dn(dF,dG,dG.srcElement,dl,true)};dw.attachEvent("onclick",dE)}else{dA("Listener could not be attached")}}};var dk=function(dE){E("Proxy form debug: start");var dD=[];s(dE,function(dG){if(dG.type==="form"){dD.push(dG)}});if(dD.length<1){dA("no form settings");return}if(dw.addEventListener){var dF=function(dG){dn(dD,dG,dG.target,dB)};dw.addEventListener("submit",dF,true)}else{if(dw.attachEvent){setInterval(function(){dD=dj(dD);var dG=dw.getElementsByTagName("form");s(dG,function(dH){if(dH.getAttribute("data-roistat-proxy-form-checked")==="true"){return}dH.setAttribute("data-roistat-proxy-form-checked","true");s(dD,function(dI){if(di(dH,dI.selector)){dH.attachEvent("onsubmit",function(){ds.event.returnValue=false;E("Proxy form debug: start sending form lead");dB(dI,ds.event.srcElement)})}})})},2000)}else{dA("Listener could not be attached")}}};var dn=function(dG,dH,dI,dF,dD){var dJ=dj(dG);var dE=null;s(dJ,function(dK){if(di(dI,dK.selector)){dE=dK}});if(dE===null){dA("No matched settings found for listener");return}dF(dH,dE,dI,dD)};var dB=function(dH,dF,dG,dE){var dD=dv(dG,dF);if(!dy(dD,dF)){E("Proxy form debug: lead fields is not valid");return}dE?dH.returnValue=false:dH.preventDefault();E("Proxy form debug: sending lead");dq(dD,dF,function(){HTMLFormElement.prototype.submit.call(dG)})};var dl=function(dF,dE){var dD=dv(null,dE);if(!dy(dD,dE)){return}dq(dD,dE)};var dq=function(dD,dG,dI){var dH={};var dF=dr(dG.crm)&&dG.crm.hasOwnProperty("is_enabled");var dE=dF?dG.crm.is_enabled:true;dH.leadName=dG.hasOwnProperty("lead_name")?dG.lead_name:"    "+dG.title;dH.formTitle=dG.title;dH.name=dD.name;dH.phone=dD.phone;dH.email=dD.email;dH.text=dD.comment;dH.fields=dD.fields;dH.placeholders_data=dD.placeholdersData;dH.is_need_callback=dG.is_need_callback>0?1:0;dH.is_skip_sending=!dE;ds.roistatGoal.reach(dH,dI)};var dr=function(dD){return(typeof dD==="number"&&!isNaN(dD))||(typeof dD==="string"&&dD!=="")||(typeof dD==="object"&&dD!==null)||(typeof dD==="boolean"&&dD)||bl(dD)};var dy=function(dD,dF){var dE=[],dH=["name","email","phone","comment"];s(dH,function(dI){if(dF.hasOwnProperty(dI)&&dF[dI].required>0){dE.push(dI)}});if(bl(dF.fields)){s(dF.fields,function(dI){if(dI.required>0){dE.push(dI)}})}var dG=true;s(dE,function(dI){if(!dD.hasOwnProperty(dI)||!dr(dD[dI])){dG=false}});return dG};var dv=function(dF,dE){var dD={};dD.name=dE.name?du(dF,dE.name.value,dE.name.type):"";dD.phone=dE.phone?du(dF,dE.phone.value,dE.phone.type):"";dD.email=dE.email?du(dF,dE.email.value,dE.email.type):"";dD.comment=dE.comment?du(dF,dE.comment.value,dE.comment.type):"";dD.fields={};dD.placeholdersData={orderPage:ck};if(bl(dE.fields)){s(dE.fields,function(dG){dD.fields[dG.name]=du(dF,dG.value,dG.type)})}return dD};var du=function(dE,dH,dD){switch(dD){case"plain":return dH||"";case"input":var dG=dE.querySelector('input[name="'+dH+'"]');return dG?dG.value:"";case"js":try{return(new Function(dH))()}catch(dF){return""}}};var dz=function(){dA("init");if(aE()){dA("Shut down because only online chat need to be inited");return}if(!ds.roistat.proxyForms.enabled){dA("disabled");return}dp();dt()};var di=function(dG,dE){if(typeof Element!=="undefined"&&Element.prototype.matches){var dD=dG.matches(dE);if(!dD){return dG.closest(dE)?dG.closest(dE).matches(dE):false}return dD}else{if(typeof Element!=="undefined"&&Element.prototype.matchesSelector){var dH=dG.matchesSelector(dE);if(!dH){return dG.closest(dE)?dG.closest(dE).matches(dE):false}return dH}else{if(dw.querySelectorAll){var dI=dw.querySelectorAll(dE);
for(var dF=0;dF<dI.length;dF++){if(dI[dF]===dG){return true}}return false}}}return false};cm(dz);ds.roistatSaveProxyFormSettings=dx})(b6,G);(function L(){if(b6.onRoistatAllModulesLoaded!==bw&&typeof b6.onRoistatAllModulesLoaded==="function"){u("onRoistatAllModulesLoaded: call");b6.onRoistatAllModulesLoaded()}})();(function aY(dp,ds,dl){var e=function(){return b3.get(aj)*1>0};var dr=function(dy){u("Request listener: "+dy)};var dx=/^(8|7|380|45|370|375|1|48|357|44|373|371|49|971|996|995|972|420|33|90|34|55|61|52|60|374|43|41|351)?(\d){9,13}$/g;var dq=/^[^\s]+[@][^\s]+$/g;var dk=["mc.yandex.ru","google-analytics.com","google.ru","google.com","stats.g.doubleclick.net"];var dj=function dj(){dr("listen");if(dp.XMLHttpRequest){XMLHttpRequest.prototype.oldSend=XMLHttpRequest.prototype.send;function dA(dD){var dC=this;dt(dC.responseURL,dD,function(){dC.oldSend(dD)})}XMLHttpRequest.prototype.send=dA}if(dp.ActiveXObject){var dz=dB;function dB(dE){var dC=new dz(dE);var dF={};if(dE.toLowerCase()==="msxml2.xmlhttp"){dF={_ax:dC,_status:"fake",responseText:"",responseXml:null,readyState:0,status:0,statusText:0,onReadyStateChange:null};var dD="";dF._onReadyStateChange=function(){var dG=dF;return function(){dG.readyState=dG._ax.readyState;if(dG.readyState===4){dG.responseText=dG._ax.responseText;dG.responseXml=dG._ax.responseXml;dG.status=dG._ax.status;dG.statusText=dG._ax.statusText}if(dG.onReadyStateChange){dG.onReadyStateChange()}}}();dF.open=function(dK,dI,dJ,dG,dH){dD=dI;dJ=(dJ!==false);this._ax.onReadyStateChange=this._onReadyStateChange;return this._ax.open(dK,dI,dJ,dG,dH)};dF.send=function(dG){var dH=this;dt(dD,dG,function(){this._ax.send(dG)})}}else{dF=dC}return dF}dp.ActiveXObject=dB}if(dp.fetch){var dy=fetch;fetch=function(dC,dD){dt(dC.url,dD||{});return dy(dC,dD||{})}}dp.addEventListener("submit",function(dF){var dH=dF.target.elements;var dG={};for(var dE=0;dE<dH.length;dE++){var dD=dH[dE];var dC=dD.getAttribute("name");dG[dC]=dD.value}dt("",dG)})};function dm(dy){var dB={};if(dy.length===0){return dB}var dA=dy.split("?");if(dA.length<2){return dB}var dz=dA[1];dB=di(dz);return dB}function di(dz){var dA=dz.split("&"),dC={};for(var dy=0;dy<dA.length;dy++){var dB=dA[dy].split("=");if(dB.length<2){continue}dC[dB[0]]=dB[1]}return dC}function dv(dP){dr("data: "+JSON.stringify(dP));var dI={email:["email","Email","EMAIL","mail","MAIL","Mail"],phone:["phone","Phone","PHONE","tel","Tel","TEL"],name:["name","Name","NAME","full_name","Full_Name","FULL_NAME"]};var dF={email:"",phone:"",name:""};for(var dy in dI){var dL=dI[dy];for(var dK in dL){if(dL.hasOwnProperty(dK)){if(dP.hasOwnProperty(dL[dK])){dF[dy]=dP[dL[dK]];break}}}}dr("new data: "+JSON.stringify(dF));var dA=dF.phone.length===0;var dE=dF.email.length===0;if(!dA&&!dE){return dF}var dz=new RegExp(dq);var dD=new RegExp(dx);var dG=Object.keys(dP);for(var dM=0;dM<dG.length;dM++){var dJ=decodeURIComponent(String(dP[dG[dM]]));if(dE){var dB=dJ.match(dz);if(dB&&dB.length>0){var dH=dF.email;dF.email=dB[0];dr("parsing email, before: "+dH+", after: "+dF.email)}}if(dA){var dO=dJ.replace(/[\s-.()+*_:;'"`]/g,"");var dN=dO.match(dD);if(dN&&dN.length>0){var dC=dF.phone;dF.phone=dJ;dr("parsing phone, before: "+dC+", after: "+dF.phone)}}}return dF}var dn=function(dy){var dz=a1(dy);return !ap(dk,dz)};function dt(dA,dz,dy){if(dA.length>0&&!dn(dA)){return}var dC=dm(dA);var dE=dz;if(typeof dE==="string"){dE=di(dE)}dr("data before parsing "+JSON.stringify({get:dC,post:dE}));var dD=dv(dC);var dB=dv(dE);dr("data after parsing "+JSON.stringify({get:dD,post:dB}));du(dD,dB,dy)}function du(dy,dA,dE){var dD=dy.email.length>0?dy.email:dA.email;var dz=dy.phone.length>0?dy.phone:dA.phone;var dC=dy.name.length>0?dy.name:dA.name;if(dD.length==0&&dz.length==0){dE();return}setTimeout(function(){dE()},100);var dB={leadName:"   ",name:dC,phone:dz,email:dD,is_skip_sending:1};dr("phone or email is not empty, reaching goal "+JSON.stringify(dB));roistatGoal.reach(dB)}(function dw(){if(!e()){dr("disabled, skip");return}dj()})()})(b6,G,bw)})(window,document,undefined);